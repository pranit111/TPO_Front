<!-- Background Container -->
<div class="min-h-screen bg-cover bg-center bg-no-repeat py-8"
    [ngStyle]="{'background-image': 'url(/Main_bg_blue.png)'}">
    <!-- Content Container -->
    <div class="relative z-10">
        <div class="container mx-auto p-6 bg-white bg-opacity-95 rounded-lg shadow-lg max-w-4xl">
            <h1 class="text-2xl font-bold text-blue-900 mb-6">Post Job</h1>
            <div class="border-b-[3px] border-gray-400 w-full mb-4"></div>
            
            <!-- Reactive Form -->
            <form [formGroup]="jobForm" (ngSubmit)="onSubmit()">
                <!-- Basic Job Information -->
                <div class="mb-8">
                    <h2 class="text-lg font-semibold text-gray-700 mb-4">Basic Job Information</h2>
                    <div class="border-b-[2px] border-gray-400 w-full mb-4"></div>

                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <!-- Company Name -->
                        <div class="form-group">
                            <label class="block text-sm font-medium text-gray-600 mb-2">Company Name</label>
                            <select formControlName="company" class="w-full px-3 py-2 border border-gray-300 rounded-md"(change)="onCompanySelect($event)">
                                <option [ngValue]="null">Select Company</option>
                                <option *ngFor="let company of companies" [ngValue]="company">
                                    {{company.name}}
                                </option>
                            </select>
                            <div class="text-red-500 text-sm mt-1" 
                                 *ngIf="jobForm.get('company')?.invalid && 
                                       (jobForm.get('company')?.dirty || jobForm.get('company')?.touched)">
                                Company name is required
                            </div>
                        </div>

                        <!-- Job Role -->
                        <div class="form-group">
                            <label class="block text-sm font-medium text-gray-600 mb-2">Job Role</label>
                            <input type="text" formControlName="jobDesignation" 
                                   class="w-full px-3 py-2 border border-gray-300 rounded-md">
                            <div class="text-red-500 text-sm mt-1" 
                                 *ngIf="jobForm.get('jobDesignation')?.invalid && 
                                       (jobForm.get('jobDesignation')?.dirty || jobForm.get('jobDesignation')?.touched)">
                                <div *ngIf="jobForm.get('jobDesignation')?.errors?.['required']">
                                    Job role is required
                                </div>
                                <div *ngIf="jobForm.get('jobDesignation')?.errors?.['minlength']">
                                    Minimum 3 characters required
                                </div>
                            </div>
                        </div>

                        <!-- Job Location -->
                        <div class="form-group">
                            <label class="block text-sm font-medium text-gray-600 mb-2">Job Location</label>
                            <input type="text" formControlName="location" 
                                   class="w-full px-3 py-2 border border-gray-300 rounded-md">
                            <div class="text-red-500 text-sm mt-1" 
                                 *ngIf="jobForm.get('location')?.invalid && 
                                       (jobForm.get('location')?.dirty || jobForm.get('location')?.touched)">
                                Job location is required
                            </div>
                        </div>

                        <!-- Job Type -->
                        <div class="form-group">
                            <label class="block text-sm font-medium text-gray-600 mb-2">Job Type</label>
                            <select formControlName="jobType" class="w-full px-3 py-2 border border-gray-300 rounded-md">
                                <option value="">Select Job Type</option>
                                <option value="Full Time">Full Time</option>
                                <option value="Part Time">Part Time</option>
                                <option value="Internship">Internship</option>
                            </select>
                            <div class="text-red-500 text-sm mt-1" 
                                 *ngIf="jobForm.get('jobType')?.invalid && 
                                       (jobForm.get('jobType')?.dirty || jobForm.get('jobType')?.touched)">
                                Job type is required
                            </div>
                        </div>
                    </div>

                    <!-- Job Description -->
                    <div class="mt-4">
                        <label class="block text-sm font-medium text-gray-600 mb-2">Job Description</label>
                        <textarea formControlName="description" rows="4"
                               class="w-full px-3 py-2 border border-gray-300 rounded-md"></textarea>
                        <div class="text-red-500 text-sm mt-1" 
                             *ngIf="jobForm.get('description')?.invalid && 
                                   (jobForm.get('description')?.dirty || jobForm.get('description')?.touched)">
                            <div *ngIf="jobForm.get('description')?.errors?.['required']">
                                Job description is required
                            </div>
                            <div *ngIf="jobForm.get('description')?.errors?.['minlength']">
                                Minimum 50 characters required
                            </div>
                        </div>
                    </div>

                    <!-- Portal Link -->
                    <div class="mt-4">
                        <label class="block text-sm font-medium text-gray-600 mb-2">Company Portal Link <span class="italic">(optional)</span></label>
                        <input type="text" formControlName="portalLink" 
                               class="w-full px-3 py-2 border border-gray-300 rounded-md">
                    </div>
                </div>

                <!-- Compensation Details -->
                <div class="mb-8">
                    <h2 class="text-lg font-semibold text-gray-700 mb-4">Compensation Details</h2>
                    <div class="border-b-[2px] border-gray-400 w-full mb-4"></div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <!-- Package Amount -->
                        <div class="form-group">
                            <label class="block text-sm font-medium text-gray-600 mb-2">Package (â‚¹)</label>
                            <input type="text" formControlName="packageAmount" 
                                   class="w-full px-3 py-2 border border-gray-300 rounded-md">
                            <div class="text-red-500 text-sm mt-1" 
                                 *ngIf="jobForm.get('packageAmount')?.invalid && 
                                       (jobForm.get('packageAmount')?.dirty || jobForm.get('packageAmount')?.touched)">
                                <div *ngIf="jobForm.get('packageAmount')?.errors?.['required']">
                                    Package amount is required
                                </div>
                                <div *ngIf="jobForm.get('packageAmount')?.errors?.['pattern']">
                                    Please enter a valid amount (e.g., 50000 or 50000.00)
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Eligibility Criteria -->
                <div class="mb-8">
                    <h2 class="text-lg font-semibold text-gray-700 mb-4">Eligibility Criteria</h2>
                    <div class="border-b-[2px] border-gray-400 w-full mb-4"></div>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <!-- Minimum Percentage -->
                        <div class="form-group">
                            <label class="block text-sm font-medium text-gray-600 mb-2">Minimum Percentage (%)</label>
                            <input type="number" formControlName="minPercentage" 
                                   class="w-full px-3 py-2 border border-gray-300 rounded-md">
                            <div class="text-red-500 text-sm mt-1" 
                                 *ngIf="jobForm.get('minPercentage')?.invalid && 
                                       (jobForm.get('minPercentage')?.dirty || jobForm.get('minPercentage')?.touched)">
                                <div *ngIf="jobForm.get('minPercentage')?.errors?.['required']">
                                    Minimum percentage is required
                                </div>
                                <div *ngIf="jobForm.get('minPercentage')?.errors?.['min'] || 
                                           jobForm.get('minPercentage')?.errors?.['max']">
                                    Must be between 35 and 100
                                </div>
                            </div>
                        </div>

                        <!-- Minimum SSC -->
                        <div class="form-group">
                            <label class="block text-sm font-medium text-gray-600 mb-2">Minimum SSC (%)</label>
                            <input type="number" formControlName="minSsc" 
                                   class="w-full px-3 py-2 border border-gray-300 rounded-md">
                            <div class="text-red-500 text-sm mt-1" 
                                 *ngIf="jobForm.get('minSsc')?.invalid && 
                                       (jobForm.get('minSsc')?.dirty || jobForm.get('minSsc')?.touched)">
                                <div *ngIf="jobForm.get('minSsc')?.errors?.['required']">
                                    Minimum SSC percentage is required
                                </div>
                                <div *ngIf="jobForm.get('minSsc')?.errors?.['min'] || 
                                           jobForm.get('minSsc')?.errors?.['max']">
                                    Must be between 35 and 100
                                </div>
                            </div>
                        </div>

                        <!-- Minimum HSC -->
                        <div class="form-group">
                            <label class="block text-sm font-medium text-gray-600 mb-2">Minimum HSC (%)</label>
                            <input type="number" formControlName="minHsc" 
                                   class="w-full px-3 py-2 border border-gray-300 rounded-md">
                            <div class="text-red-500 text-sm mt-1" 
                                 *ngIf="jobForm.get('minHsc')?.invalid && 
                                       (jobForm.get('minHsc')?.dirty || jobForm.get('minHsc')?.touched)">
                                <div *ngIf="jobForm.get('minHsc')?.errors?.['required']">
                                    Minimum HSC percentage is required
                                </div>
                                <div *ngIf="jobForm.get('minHsc')?.errors?.['min'] || 
                                           jobForm.get('minHsc')?.errors?.['max']">
                                    Must be between 35 and 100
                                </div>
                            </div>
                        </div>

                        <!-- Backlog Allowance -->
                        <div class="form-group">
                            <label class="block text-sm font-medium text-gray-600 mb-2">Backlog Allowance</label>
                            <input type="number" formControlName="backlogAllowance" 
                                   class="w-full px-3 py-2 border border-gray-300 rounded-md">
                            <div class="text-red-500 text-sm mt-1" 
                                 *ngIf="jobForm.get('backlogAllowance')?.invalid && 
                                       (jobForm.get('backlogAllowance')?.dirty || jobForm.get('backlogAllowance')?.touched)">
                                <div *ngIf="jobForm.get('backlogAllowance')?.errors?.['required']">
                                    Backlog allowance is required
                                </div>
                                <div *ngIf="jobForm.get('backlogAllowance')?.errors?.['min'] || 
                                           jobForm.get('backlogAllowance')?.errors?.['max']">
                                    Must be between 0 and 10
                                </div>
                            </div>
                        </div>

                        <!-- Preferred Course -->
                        <div class="form-group">
                            <label class="block text-sm font-medium text-gray-600 mb-2">Preferred Course</label>
                            <input type="text" formControlName="preferredCourse" 
                                   class="w-full px-3 py-2 border border-gray-300 rounded-md">
                            <div class="text-red-500 text-sm mt-1" 
                                 *ngIf="jobForm.get('preferredCourse')?.invalid && 
                                       (jobForm.get('preferredCourse')?.dirty || jobForm.get('preferredCourse')?.touched)">
                                Preferred course is required
                            </div>
                        </div>

                        <!-- Student Year -->
                        <div class="form-group">
                            <label class="block text-sm font-medium text-gray-600 mb-2">Student Year</label>
                            <select formControlName="studentYear" class="w-full px-3 py-2 border border-gray-300 rounded-md">
                                <option value="">Select Student Year</option>
                                <option value="FE">FE (First Year)</option>
                                <option value="SE">SE (Second Year)</option>
                                <option value="TE">TE (Third Year)</option>
                                <option value="BE">BE (Final Year)</option>
                                <option value="ALL">All Years</option>
                            </select>
                            <div class="text-red-500 text-sm mt-1" 
                                 *ngIf="jobForm.get('studentYear')?.invalid && 
                                       (jobForm.get('studentYear')?.dirty || jobForm.get('studentYear')?.touched)">
                                Student year is required
                            </div>
                        </div>
                    </div>

                    <!-- Skills Requirements -->
                    <div class="mt-4">
                        <label class="block text-sm font-medium text-gray-600 mb-2">Skills Requirements</label>
                        <input type="text" formControlName="skillsRequirements" 
                               class="w-full px-3 py-2 border border-gray-300 rounded-md">
                        <div class="text-red-500 text-sm mt-1" 
                             *ngIf="jobForm.get('skillsRequirements')?.invalid && 
                                   (jobForm.get('skillsRequirements')?.dirty || jobForm.get('skillsRequirements')?.touched)">
                            Skills requirements are required
                        </div>
                    </div>
                </div>

                <!-- Recruitment Process -->
                <div class="mb-8">
                    <h2 class="text-lg font-semibold text-gray-700 mb-4">Recruitment Process</h2>
                    <div class="border-b-[2px] border-gray-400 w-full mb-4"></div>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <!-- Selection Rounds -->
                        <div class="form-group">
                            <label class="block text-sm font-medium text-gray-600 mb-2">Selection Rounds</label>
                            <input type="text" formControlName="selectionRounds" 
                                   class="w-full px-3 py-2 border border-gray-300 rounded-md">
                            <div class="text-red-500 text-sm mt-1" 
                                 *ngIf="jobForm.get('selectionRounds')?.invalid && 
                                       (jobForm.get('selectionRounds')?.dirty || jobForm.get('selectionRounds')?.touched)">
                                Selection rounds are required
                            </div>
                        </div>

                        <!-- Mode of Recruitment -->
                        <div class="form-group">
                            <label class="block text-sm font-medium text-gray-600 mb-2">Mode Of Recruitment</label>
                            <input type="text" formControlName="modeOfRecruitment" 
                                   class="w-full px-3 py-2 border border-gray-300 rounded-md">
                            <div class="text-red-500 text-sm mt-1" 
                                 *ngIf="jobForm.get('modeOfRecruitment')?.invalid && 
                                       (jobForm.get('modeOfRecruitment')?.dirty || jobForm.get('modeOfRecruitment')?.touched)">
                                Mode of recruitment is required
                            </div>
                        </div>

                        <!-- Test Platform -->
                        <div class="form-group">
                            <label class="block text-sm font-medium text-gray-600 mb-2">Test Platform</label>
                            <input type="text" formControlName="testPlatform" 
                                   class="w-full px-3 py-2 border border-gray-300 rounded-md">
                            <div class="text-red-500 text-sm mt-1" 
                                 *ngIf="jobForm.get('testPlatform')?.invalid && 
                                       (jobForm.get('testPlatform')?.dirty || jobForm.get('testPlatform')?.touched)">
                                Test platform is required
                            </div>
                        </div>

                        <!-- Aptitude Test -->
                        <div class="form-group">
                            <label class="block text-sm font-medium text-gray-600 mb-2">Aptitude Test</label>
                            <select formControlName="aptitude" 
                                    class="w-full px-3 py-2 border border-gray-300 rounded-md">
                                <option [ngValue]="true">Yes</option>
                                <option [ngValue]="false">No</option>
                            </select>
                            <div class="text-red-500 text-sm mt-1" 
                                 *ngIf="jobForm.get('aptitude')?.invalid && 
                                       (jobForm.get('aptitude')?.dirty || jobForm.get('aptitude')?.touched)">
                                Please select an option
                            </div>
                        </div>
                    </div>

                    <!-- Recruitment Details -->
                    <div class="mt-4">
                        <label class="block text-sm font-medium text-gray-600 mb-2">Recruitment Details</label>
                        <textarea formControlName="recruitmentDetails" rows="3"
                               class="w-full px-3 py-2 border border-gray-300 rounded-md"></textarea>
                        <div class="text-red-500 text-sm mt-1" 
                             *ngIf="jobForm.get('recruitmentDetails')?.invalid && 
                                   (jobForm.get('recruitmentDetails')?.dirty || jobForm.get('recruitmentDetails')?.touched)">
                            Recruitment details are required
                        </div>
                    </div>
                </div>

                <!-- Time Frame -->
                <div class="mb-8">
                    <h2 class="text-lg font-semibold text-gray-700 mb-4">Time Frame</h2>
                    <div class="border-b-[2px] border-gray-400 w-full mb-4"></div>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                        <!-- Application Start Date -->
                        <div class="form-group">
                            <label class="block text-sm font-medium text-gray-600 mb-2">Application Start Date</label>
                            <input type="date" formControlName="applicationStartDate" [min]="today"
                                   class="w-full px-3 py-2 border border-gray-300 rounded-md">
                            <div class="text-red-500 text-sm mt-1" 
                                 *ngIf="jobForm.get('applicationStartDate')?.invalid && 
                                       (jobForm.get('applicationStartDate')?.dirty || jobForm.get('applicationStartDate')?.touched)">
                                <div *ngIf="jobForm.get('applicationStartDate')?.errors?.['required']">
                                    Start date is required
                                </div>
                            </div>
                        </div>

                        <!-- Application End Date -->
                        <div class="form-group">
                            <label class="block text-sm font-medium text-gray-600 mb-2">Application End Date</label>
                            <input type="date" formControlName="applicationEndDate" 
                                   [min]="jobForm.get('applicationStartDate')?.value || today"
                                   class="w-full px-3 py-2 border border-gray-300 rounded-md">
                            <div class="text-red-500 text-sm mt-1" 
                                 *ngIf="jobForm.get('applicationEndDate')?.invalid && 
                                       (jobForm.get('applicationEndDate')?.dirty || jobForm.get('applicationEndDate')?.touched)">
                                <div *ngIf="jobForm.get('applicationEndDate')?.errors?.['required']">
                                    End date is required
                                </div>
                            </div>
                        </div>

                        <!-- Selection Start Date -->
                        <div class="form-group">
                            <label class="block text-sm font-medium text-gray-600 mb-2">Selection Start Date</label>
                            <input type="date" formControlName="selectionStartDate" 
                                   [min]="jobForm.get('applicationEndDate')?.value || today"
                                   class="w-full px-3 py-2 border border-gray-300 rounded-md">
                            <div class="text-red-500 text-sm mt-1" 
                                 *ngIf="jobForm.get('selectionStartDate')?.invalid && 
                                       (jobForm.get('selectionStartDate')?.dirty || jobForm.get('selectionStartDate')?.touched)">
                                <div *ngIf="jobForm.get('selectionStartDate')?.errors?.['required']">
                                    Selection start date is required
                                </div>
                            </div>
                        </div>

                        <!-- Selection End Date -->
                        <div class="form-group">
                            <label class="block text-sm font-medium text-gray-600 mb-2">Selection End Date</label>
                            <input type="date" formControlName="selectionEndDate" 
                                   [min]="jobForm.get('selectionStartDate')?.value || today"
                                   class="w-full px-3 py-2 border border-gray-300 rounded-md">
                            <div class="text-red-500 text-sm mt-1" 
                                 *ngIf="jobForm.get('selectionEndDate')?.invalid && 
                                       (jobForm.get('selectionEndDate')?.dirty || jobForm.get('selectionEndDate')?.touched)">
                                <div *ngIf="jobForm.get('selectionEndDate')?.errors?.['required']">
                                    Selection end date is required
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Submit Button -->
                <div class="flex justify-end">
                    <button type="submit" 
                            class="px-6 py-2 bg-blue-900 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2"
                            [disabled]="jobForm.invalid">
                        POST
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>