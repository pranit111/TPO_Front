<!-- dashboard.component.html -->
<!-- Add these fonts to your document head -->
<link href="https://fonts.googleapis.com/css2?family=Onest:wght@400;500;600;800&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Roboto+Flex:wght@300;400;500;600&display=swap" rel="stylesheet">

<style>
  /* Define font classes */
  .font-onest {
    font-family: 'Onest', sans-serif;
  }

  .font-roboto-flex {
    font-family: 'Roboto Flex', sans-serif;
  }

  /* Apply fonts globally */
  h1,
  h2,
  h3,
  .text-xl,
  .text-2xl,
  .text-3xl,
  .font-bold,
  .font-semibold {
    font-family: 'Onest', sans-serif;
  }

  p,
  span,
  button,
  input,
  select,
  .text-sm,
  .text-xs {
    font-family: 'Roboto Flex', sans-serif;
  }
</style>
<div class="flex h-screen bgimage">
  <!-- Sidebar -->
  <nav class="w-20 sidebar flex flex-col items-center py-6 shadow-enhanced">
    <div class="mb-10">
      <div class="w-12 h-12 bg-gradient-to-r from-blue-400 to-blue-600 rounded-xl flex items-center justify-center shadow-lg">
        <span class="text-white font-bold text-xl">A</span>
      </div>
    </div>

    <div class="flex flex-col items-center space-y-6 mt-6">
      <ng-container *ngFor="let item of navItems">
        <div class="nav-item cursor-pointer group transition-all rounded-xl" 
             [class.active]="item.active"
             (click)="setSelectedTab(item.title)">
          <div class="flex items-center justify-center w-12 h-12 rounded-xl transition-all relative z-10">
            <i class="fas fa-{{item.icon}} text-lg text-white"></i>
            <img *ngIf="item.icon" [src]="item.icon" alt="{{item.title}}" class="w-6 h-6">
          </div>
          <div class="text-xs text-center mt-1 font-medium text-white/80">{{item.title}}</div>
        </div>
      </ng-container>
    </div>
  </nav>

  <!-- Main Content Area -->
  <div class="flex-1 flex">
    <!-- Dashboard Content -->
    <main class="flex-1 p-6 overflow-auto animate-fadeInUp" *ngIf="selectedTab=='Dashboard'">
      <div class="main-content dashboard-header rounded-xl shadow-enhanced p-6 mb-6">
        <div class="flex items-center justify-between mb-6">
          <div>
            <h1 class="text-3xl font-bold gradient-text">Admin Dashboard</h1>
            <p class="text-gray-600 mt-1">Welcome back! Here's what's happening with your placements.</p>
          </div>
          <div class="flex items-center space-x-4">
            <div class="flex items-center space-x-2 bg-white/50 backdrop-blur-sm rounded-lg px-3 py-2">
              <div class="w-2 h-2 bg-green-500 rounded-full animate-pulse"></div>
              <span class="text-sm font-medium text-gray-700">Live Data</span>
            </div>
            <div class="flex items-center space-x-2">
              <button (click)="exportDashboardData()" class="btn-primary" [disabled]="isExporting">
                <i class="fas fa-download mr-2"></i>
                <span *ngIf="!isExporting">Export Excel</span>
                <span *ngIf="isExporting">Exporting...</span>
              </button>
              <button (click)="refreshDashboardData()" class="btn-secondary">
                <i class="fas fa-sync-alt mr-2"></i>
                Refresh
              </button>
            </div>
          </div>
        </div>
    
        <!-- Enhanced KPI Summary -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
          <div class="kpi-card blue rounded-xl shadow-enhanced p-6">
            <div class="flex items-center justify-between">
              <div>
                <p class="text-sm text-gray-600 font-medium mb-1">Total Students</p>
                <p class="text-3xl font-bold text-gray-800">{{dashboardData?.studentData?.total || 0}}</p>
              </div>
              <div class="w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center">
                <i class="fas fa-users text-blue-600 text-xl"></i>
              </div>
            </div>
          </div>
          
          <div class="kpi-card green rounded-xl shadow-enhanced p-6">
            <div class="flex items-center justify-between">
              <div>
                <p class="text-sm text-gray-600 font-medium mb-1">Placement Rate</p>
                <p class="text-3xl font-bold text-gray-800">{{dashboardData?.studentData?.placementRate || 0}}%</p>
              </div>
              <div class="w-12 h-12 bg-green-100 rounded-full flex items-center justify-center">
                <i class="fas fa-chart-line text-green-600 text-xl"></i>
              </div>
            </div>
          </div>
          
          <div class="kpi-card amber rounded-xl shadow-enhanced p-6">
            <div class="flex items-center justify-between">
              <div>
                <p class="text-sm text-gray-600 font-medium mb-1">Active Companies</p>
                <p class="text-3xl font-bold text-gray-800">{{dashboardData?.companiesData?.total || 0}}</p>
                <p class="text-xs text-amber-600 mt-1">
                  <i class="fas fa-building mr-1"></i>
                  {{dashboardData?.companiesData?.totalOpenings || 0}} openings
                </p>
              </div>
              <div class="w-12 h-12 bg-amber-100 rounded-full flex items-center justify-center">
                <i class="fas fa-building text-amber-600 text-xl"></i>
              </div>
            </div>
          </div>
          
          <div class="kpi-card teal rounded-xl shadow-enhanced p-6">
            <div class="flex items-center justify-between">
              <div>
                <p class="text-sm text-gray-600 font-medium mb-1">Avg. Package</p>
                <p class="text-3xl font-bold text-gray-800">{{formatPackageForDisplay(dashboardData?.insightsData?.averagePackage)}}</p>
                <p class="text-xs text-teal-600 mt-1">
                  <i class="fas fa-rupee-sign mr-1"></i>
                  Highest: {{formatPackageForDisplay(dashboardData?.insightsData?.highestPackage)}}
                </p>
              </div>
              <div class="w-12 h-12 bg-teal-100 rounded-full flex items-center justify-center">
                <i class="fas fa-money-bill-wave text-teal-600 text-xl"></i>
              </div>
            </div>
          </div>
        </div>
    
        <!-- Real-time Stats Section -->
        <div *ngIf="realTimeStats" class="bg-gradient-to-r from-indigo-50 to-purple-50 rounded-xl p-6 mb-8 border border-indigo-200">
          <div class="flex items-center justify-between mb-4">
            <h3 class="text-lg font-bold text-gray-800">Real-time Activity</h3>
            <div class="flex items-center space-x-2">
              <div class="w-2 h-2 bg-red-500 rounded-full animate-pulse"></div>
              <span class="text-sm text-gray-600">Live</span>
            </div>
          </div>
          <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
            <div class="bg-white rounded-lg p-4 shadow-sm">
              <div class="flex items-center justify-between">
                <div>
                  <p class="text-sm text-gray-600">Active Users</p>
                  <p class="text-2xl font-bold text-blue-600">{{realTimeStats?.activeUsers || 0}}</p>
                </div>
                <i class="fas fa-users text-blue-500 text-xl"></i>
              </div>
            </div>
            <div class="bg-white rounded-lg p-4 shadow-sm">
              <div class="flex items-center justify-between">
                <div>
                  <p class="text-sm text-gray-600">Ongoing Applications</p>
                  <p class="text-2xl font-bold text-green-600">{{realTimeStats?.ongoingApplications || 0}}</p>
                </div>
                <i class="fas fa-file-alt text-green-500 text-xl"></i>
              </div>
            </div>
            <div class="bg-white rounded-lg p-4 shadow-sm">
              <div class="flex items-center justify-between">
                <div>
                  <p class="text-sm text-gray-600">Current Visitors</p>
                  <p class="text-2xl font-bold text-purple-600">{{realTimeStats?.currentVisitors || 0}}</p>
                </div>
                <i class="fas fa-eye text-purple-500 text-xl"></i>
              </div>
            </div>
          </div>
        </div>
    
        <!-- Enhanced Dashboard Cards -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">
          <!-- Students Card with Enhanced Visualization -->
          <div class="dashboard-card rounded-xl shadow-enhanced p-6">
            <div class="flex justify-between items-center mb-6">
              <h2 class="text-xl font-bold text-gray-800">Student Placement Overview</h2>
              <div class="flex items-center space-x-2">
                <div class="w-3 h-3 bg-blue-500 rounded-full animate-pulse"></div>
                <span class="text-sm text-gray-500">Live</span>
              </div>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
              <!-- Stats Grid -->
              <div class="space-y-4">
                <div class="bg-gradient-to-r from-blue-50 to-blue-100 rounded-lg p-4 border border-blue-200">
                  <div class="flex items-center justify-between">
                    <div>
                      <p class="text-sm text-blue-600 font-medium mb-1">Total Students</p>
                      <p class="text-2xl font-bold text-blue-800">{{dashboardData?.studentData?.total || 0}}</p>
                    </div>
                    <div class="w-10 h-10 bg-blue-200 rounded-full flex items-center justify-center">
                      <i class="fas fa-users text-blue-600"></i>
                    </div>
                  </div>
                </div>
                
                <div class="bg-gradient-to-r from-green-50 to-green-100 rounded-lg p-4 border border-green-200">
                  <div class="flex items-center justify-between">
                    <div>
                      <p class="text-sm text-green-600 font-medium mb-1">Placed</p>
                      <p class="text-2xl font-bold text-green-800">{{dashboardData?.studentData?.placed || 0}}</p>
                    </div>
                    <div class="w-10 h-10 bg-green-200 rounded-full flex items-center justify-center">
                      <i class="fas fa-check text-green-600"></i>
                    </div>
                  </div>
                </div>
                
                <div class="bg-gradient-to-r from-amber-50 to-amber-100 rounded-lg p-4 border border-amber-200">
                  <div class="flex items-center justify-between">
                    <div>
                      <p class="text-sm text-amber-600 font-medium mb-1">Remaining</p>
                      <p class="text-2xl font-bold text-amber-800">{{dashboardData?.studentData?.remaining || 0}}</p>
                    </div>
                    <div class="w-10 h-10 bg-amber-200 rounded-full flex items-center justify-center">
                      <i class="fas fa-clock text-amber-600"></i>
                    </div>
                  </div>
                </div>
              </div>
              
              <!-- Enhanced Circular Progress -->
              <div class="flex items-center justify-center">
                <div class="relative w-48 h-48">
                  <svg viewBox="0 0 100 100" class="w-full h-full transform -rotate-90">
                    <!-- Background circle -->
                    <circle cx="50" cy="50" r="45" fill="none" stroke="#e5e7eb" stroke-width="8" />
                    <!-- Progress circle -->
                    <circle cx="50" cy="50" r="45" fill="none" stroke="url(#gradient)" stroke-width="8" 
                            stroke-linecap="round" stroke-dasharray="283" 
                            [attr.stroke-dashoffset]="283 - ((dashboardData?.studentData?.placementRate || 0) / 100 * 283)"
                            class="transition-all duration-1000 ease-out" />
                    <!-- Gradient definition -->
                    <defs>
                      <linearGradient id="gradient" x1="0%" y1="0%" x2="100%" y2="100%">
                        <stop offset="0%" style="stop-color:#3b82f6;stop-opacity:1" />
                        <stop offset="100%" style="stop-color:#1d4ed8;stop-opacity:1" />
                      </linearGradient>
                    </defs>
                  </svg>
                  <div class="absolute inset-0 flex items-center justify-center">
                    <div class="text-center">
                      <div class="text-3xl font-bold text-gray-800">{{dashboardData?.studentData?.placementRate || 0}}%</div>
                      <div class="text-sm text-gray-500 mt-1">Placement Rate</div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
    
          <!-- Enhanced Insights Card -->
          <div class="dashboard-card rounded-xl shadow-enhanced p-6">
            <div class="flex justify-between items-center mb-6">
              <h2 class="text-xl font-bold text-gray-800">Placement Insights</h2>
              <button class="btn-secondary">
                <i class="fas fa-chart-bar mr-2"></i>
                View Details
              </button>
            </div>
            
            <div class="space-y-6">
              <!-- Highest Package -->
              <div class="bg-gradient-to-r from-purple-50 to-purple-100 rounded-lg p-4 border border-purple-200">
                <div class="flex justify-between items-center mb-3">
                  <span class="text-sm font-medium text-purple-600">Highest Package</span>
                  <span class="text-lg font-bold text-purple-800">{{formatPackageForDisplay(dashboardData?.insightsData?.highestPackage)}}</span>
                </div>
              </div>
              
              <!-- Average Package -->
              <div class="bg-gradient-to-r from-teal-50 to-teal-100 rounded-lg p-4 border border-teal-200">
                <div class="flex justify-between items-center mb-3">
                  <span class="text-sm font-medium text-teal-600">Average Package</span>
                  <span class="text-lg font-bold text-teal-800">{{formatPackageForDisplay(dashboardData?.insightsData?.averagePackage)}}</span>
                </div>
              </div>
              
              <!-- Top Hiring Company -->
              <div class="bg-gradient-to-r from-indigo-50 to-indigo-100 rounded-lg p-4 border border-indigo-200">
                <div class="flex justify-between items-center mb-3">
                  <span class="text-sm font-medium text-indigo-600">Top Hiring Company</span>
                  <span class="text-lg font-bold text-indigo-800">{{dashboardData?.insightsData?.topHiringCompany || 'N/A'}}</span>
                </div>
              </div>
            </div>
          </div>
        </div>
    
        <!-- Enhanced Bottom Section -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
          <!-- Enhanced Companies Card -->
          <div class="dashboard-card rounded-xl shadow-enhanced p-6">
            <div class="flex justify-between items-center mb-6">
              <h2 class="text-xl font-bold text-gray-800">Company Analytics</h2>
              <div class="flex items-center space-x-2">
                <button (click)="exportCompanyData()" class="btn-secondary" [disabled]="isExporting">
                  <i class="fas fa-download mr-2"></i>
                  Export
                </button>
              
              </div>
            </div>
            
            <!-- Company Stats -->
            <div class="grid grid-cols-3 gap-3 mb-6">
              <div class="bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg p-3 text-center border border-blue-200">
                <div class="w-8 h-8 bg-blue-200 rounded-full flex items-center justify-center mx-auto mb-2">
                  <i class="fas fa-building text-blue-600 text-sm"></i>
                </div>
                <p class="text-xs text-blue-600 font-medium mb-1">Total</p>
                <p class="text-lg font-bold text-blue-800">{{dashboardData?.companiesData?.total || 0}}</p>
              </div>
              <div class="bg-gradient-to-br from-green-50 to-green-100 rounded-lg p-3 text-center border border-green-200">
                <div class="w-8 h-8 bg-green-200 rounded-full flex items-center justify-center mx-auto mb-2">
                  <i class="fas fa-briefcase text-green-600 text-sm"></i>
                </div>
                <p class="text-xs text-green-600 font-medium mb-1">Openings</p>
                <p class="text-lg font-bold text-green-800">{{dashboardData?.companiesData?.totalOpenings || 0}}</p>
              </div>
              <div class="bg-gradient-to-br from-amber-50 to-amber-100 rounded-lg p-3 text-center border border-amber-200">
                <div class="w-8 h-8 bg-amber-200 rounded-full flex items-center justify-center mx-auto mb-2">
                  <i class="fas fa-hourglass-half text-amber-600 text-sm"></i>
                </div>
                <p class="text-xs text-amber-600 font-medium mb-1">Pending</p>
                <p class="text-lg font-bold text-amber-800">{{dashboardData?.companiesData?.remaining || 0}}</p>
              </div>
            </div>
    
            <!-- Enhanced Company Chart -->
            <div class="chart-container">
              <div class="bar-chart">
                <div class="h-40 flex items-end justify-between space-x-2 pb-2">
                  <div *ngFor="let company of dashboardData?.companiesData?.companies; let i = index"
                       class="flex-1 flex flex-col items-center">
                    <div class="chart-bar w-full transition-all duration-500 hover:scale-105"
                         [style.height.%]="getProgressPercentage(company.openings, (dashboardData?.companiesData?.totalOpenings || 1))"
                         [ngClass]="getCompanyBarColor(i)">
                    </div>
                    <span class="text-xs font-medium text-gray-600 mt-2 text-center">
                      {{company.name.split(' ')[0]}}
                    </span>
                    <span class="text-xs text-gray-500">{{company.openings}}</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
    
          <!-- Enhanced Departments Card -->
          <div class="dashboard-card rounded-xl shadow-enhanced p-6">
            <div class="flex justify-between items-center mb-6">
              <h2 class="text-xl font-bold text-gray-800">Department Analysis</h2>
              <div class="bg-gradient-to-r from-blue-50 to-blue-100 text-blue-600 text-xs font-medium px-3 py-1 rounded-full border border-blue-200">
                {{dashboardData?.departmentsData?.totalDepartments || 0}} Total
              </div>
            </div>
    
            <div class="space-y-4 mb-6">
              <div *ngFor="let dept of dashboardData?.departmentStats; let i = index" 
                   class="flex items-center p-3 bg-gradient-to-r from-gray-50 to-gray-100 rounded-lg border border-gray-200 hover:shadow-md transition-all">
                <div class="department-indicator mr-4 w-4 h-4 rounded-full"
                     [ngClass]="getDepartmentColor(i)">
                </div>
                <div class="flex-1">
                  <div class="flex justify-between items-center mb-1">
                    <span class="text-sm font-medium text-gray-800">{{dept.departmentName}}</span>
                    <span class="text-sm font-bold" [ngClass]="getDepartmentTextColor(i)">
                      {{dept.placementPercentage | number:'1.0-1'}}%
                    </span>
                  </div>
                  <div class="w-full bg-gray-200 rounded-full h-2">
                    <div class="h-2 rounded-full transition-all duration-500" 
                         [style.width.%]="dept.placementPercentage"
                         [ngClass]="getDepartmentBarColor(i)">
                    </div>
                  </div>
                  <div class="flex justify-between text-xs text-gray-500 mt-1">
                    <span>{{dept.totalStudents}} students</span>
                    <span>{{dept.placedStudents}} placed</span>
                  </div>
                  <div class="text-xs text-gray-400 mt-1">
                    Avg Package: {{formatPackageAmount(dept.averagePackage)}}
                  </div>
                </div>
              </div>
              
              <!-- Show loading state if no department data -->
              <div *ngIf="!dashboardData?.departmentStats?.length" 
                   class="space-y-3">
                <div class="flex items-center p-3 bg-gray-50 rounded-lg">
                  <div class="w-3 h-3 rounded-full bg-gray-300 mr-4 loading-pulse"></div>
                  <div class="flex-1">
                    <div class="h-4 bg-gray-200 rounded loading-shimmer mb-2"></div>
                    <div class="h-2 bg-gray-100 rounded loading-shimmer"></div>
                  </div>
                </div>
                <div class="flex items-center p-3 bg-gray-50 rounded-lg">
                  <div class="w-3 h-3 rounded-full bg-gray-300 mr-4 loading-pulse"></div>
                  <div class="flex-1">
                    <div class="h-4 bg-gray-200 rounded loading-shimmer mb-2"></div>
                    <div class="h-2 bg-gray-100 rounded loading-shimmer"></div>
                  </div>
                </div>
              </div>
            </div>
    
            <div class="pt-4 border-t border-gray-200">
              <div class="flex justify-between items-center">
                <span class="text-sm font-medium text-gray-600">Eligible Students</span>
                <span class="text-lg font-bold text-gray-800">{{dashboardData?.departmentsData?.eligibleStudents || 0}}</span>
              </div>
            </div>
          </div>
    
          <!-- Enhanced Top Students Card -->
          <div class="dashboard-card rounded-xl shadow-enhanced p-6">
            <div class="flex justify-between items-center mb-6">
              <h2 class="text-xl font-bold text-gray-800">Top Performers</h2>
           
            </div>
    
            <div class="space-y-4">
              <div *ngFor="let student of dashboardData?.topStudents; let i = index" 
                   class="flex items-center p-4 bg-gradient-to-r from-white to-gray-50 rounded-lg border border-gray-200 hover:shadow-md transition-all">
                <div class="student-rank w-12 h-12 rounded-full flex items-center justify-center mr-4 font-bold text-white"
                     [ngClass]="getStudentRankColor(i)">
                  {{student.rank}}
                </div>
                <div class="flex-1">
                  <div class="flex justify-between items-start">
                    <div>
                      <p class="text-sm font-bold text-gray-800">{{student.name}}</p>
                      <p class="text-xs text-gray-500">{{student.department}}</p>
                    </div>
                    <div class="text-right">
                      <p class="text-sm font-bold text-blue-600">{{formatPackageForDisplay(student.packageAmount)}}</p>
                      <p class="text-xs text-gray-500">{{student.company}}</p>
                    </div>
                  </div>
                </div>
              </div>
              
              <!-- Show loading state if no student data -->
              <div *ngIf="!dashboardData?.topStudents?.length" class="space-y-3">
                <div class="flex items-center p-4 bg-gray-50 rounded-lg">
                  <div class="w-12 h-12 rounded-full bg-gray-300 mr-4 loading-pulse"></div>
                  <div class="flex-1">
                    <div class="h-4 bg-gray-200 rounded loading-shimmer mb-2"></div>
                    <div class="h-3 bg-gray-100 rounded loading-shimmer"></div>
                  </div>
                </div>
                <div class="flex items-center p-4 bg-gray-50 rounded-lg">
                  <div class="w-12 h-12 rounded-full bg-gray-300 mr-4 loading-pulse"></div>
                  <div class="flex-1">
                    <div class="h-4 bg-gray-200 rounded loading-shimmer mb-2"></div>
                    <div class="h-3 bg-gray-100 rounded loading-shimmer"></div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
    
        <!-- Loading State -->
        <div *ngIf="isLoading" class="space-y-6">
          <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
            <div *ngFor="let i of [1,2,3,4]" class="bg-white rounded-xl shadow-md p-6 border">
              <div class="flex items-center justify-between">
                <div class="flex-1">
                  <div class="h-4 bg-gray-200 rounded loading-shimmer mb-2"></div>
                  <div class="h-8 bg-gray-300 rounded loading-shimmer mb-2"></div>
                  <div class="h-3 bg-gray-200 rounded loading-shimmer"></div>
                </div>
                <div class="w-12 h-12 bg-gray-200 rounded-full loading-shimmer"></div>
              </div>
            </div>
          </div>
          
          <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
            <div *ngFor="let i of [1,2]" class="bg-white rounded-xl shadow-md p-6">
              <div class="h-6 bg-gray-200 rounded loading-shimmer mb-4"></div>
              <div class="space-y-4">
                <div class="h-4 bg-gray-200 rounded loading-shimmer"></div>
                <div class="h-4 bg-gray-200 rounded loading-shimmer"></div>
                <div class="h-4 bg-gray-200 rounded loading-shimmer"></div>
              </div>
            </div>
          </div>
        </div>

        <!-- Error State -->
        <div *ngIf="error && !isLoading" class="text-center py-12">
          <div class="max-w-md mx-auto">
            <div class="w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4">
              <i class="fas fa-exclamation-triangle text-red-600 text-2xl"></i>
            </div>
            <h3 class="text-xl font-bold text-gray-800 mb-2">Unable to Load Dashboard</h3>
            <p class="text-gray-600 mb-6">{{error}}</p>
            <button (click)="loadDashboardData()" class="btn-primary">
              <i class="fas fa-sync-alt mr-2"></i>
              Retry
            </button>
          </div>
        </div>

        <!-- System Health and Notifications -->
        <div *ngIf="systemHealth || dashboardNotifications" class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8">
          <!-- System Health -->
          <div *ngIf="systemHealth" class="dashboard-card rounded-xl shadow-enhanced p-6">
            <div class="flex items-center justify-between mb-4">
              <h3 class="text-lg font-bold text-gray-800">System Health</h3>
              <div class="flex items-center space-x-2">
                <div class="w-3 h-3 bg-green-500 rounded-full"></div>
                <span class="text-sm text-green-600 font-medium">All Systems Operational</span>
              </div>
            </div>
            <div class="space-y-3">
              <div class="flex justify-between items-center">
                <span class="text-sm text-gray-600">Database Status</span>
                <span class="text-sm font-medium text-green-600">{{systemHealth?.databaseStatus || 'Connected'}}</span>
              </div>
              <div class="flex justify-between items-center">
                <span class="text-sm text-gray-600">API Uptime</span>
                <span class="text-sm font-medium text-blue-600">{{systemHealth?.apiUptime || '99.98%'}}</span>
              </div>
              <div class="flex justify-between items-center">
                <span class="text-sm text-gray-600">Server Response Time</span>
                <span class="text-sm font-medium text-purple-600">{{systemHealth?.responseTime || '< 200ms'}}</span>
              </div>
            </div>
          </div>

          <!-- Notifications -->
          <div *ngIf="dashboardNotifications" class="dashboard-card rounded-xl shadow-enhanced p-6">
            <div class="flex items-center justify-between mb-4">
              <h3 class="text-lg font-bold text-gray-800">Recent Notifications</h3>

            </div>
            <div class="space-y-3">
              <div *ngFor="let notification of dashboardNotifications?.alerts?.slice(0, 3)" 
                   class="flex items-start space-x-3 p-3 bg-gray-50 rounded-lg">
                <div class="w-2 h-2 mt-2 bg-blue-500 rounded-full"></div>
                <div class="flex-1">
                  <p class="text-sm font-medium text-gray-800">{{notification?.type || 'System Alert'}}</p>
                  <p class="text-xs text-gray-600">{{notification?.message || 'No recent notifications'}}</p>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Main Dashboard Content -->
        <div *ngIf="!isLoading && !error && dashboardData">
          <!-- Dashboard content is already rendered above -->
        </div>
      </div>
    </main>

    <!-- Students Content -->
    <main class="flex-1 p-6 overflow-auto" *ngIf="selectedTab=='Students'">
      <div class="bg-gray-100 rounded-xl shadow-lg p-6 mb-4">
        <div class="flex items-center justify-between mb-6">
          <h1 class="text-3xl font-bold text-blue-800">Student Management</h1>
          <div class="flex items-center space-x-4">
            <div class="relative">
              
            </div>
            <button class="bg-blue-600 text-white rounded-lg px-4 py-2 text-sm font-medium hover:bg-blue-700">
              Add Student
            </button>
          </div>
        </div>

        <!-- Student Statistics -->
        <div class="grid grid-cols-4 gap-4 mb-6">
          <div class="bg-white rounded-lg shadow-md p-4 border-l-4 border-blue-500">
            <p class="text-sm text-gray-500 font-medium">Total Students</p>
            <p class="text-2xl font-bold text-gray-800">{{dashboardData?.studentData?.total}}</p>
          </div>
          <div class="bg-white rounded-lg shadow-md p-4 border-l-4 border-green-500">
            <p class="text-sm text-gray-500 font-medium">Placed Students</p>
            <p class="text-2xl font-bold text-gray-800">{{dashboardData?.studentData?.placed}}</p>
          </div>
          <div class="bg-white rounded-lg shadow-md p-4 border-l-4 border-amber-500">
            <p class="text-sm text-gray-500 font-medium">Remaining</p>
            <p class="text-2xl font-bold text-gray-800">{{dashboardData?.studentData?.remaining}}</p>
          </div>
          <div class="bg-white rounded-lg shadow-md p-4 border-l-4 border-teal-500">
            <p class="text-sm text-gray-500 font-medium">Placement Rate</p>
            <p class="text-2xl font-bold text-gray-800">{{dashboardData?.studentData?.placementRate}}%</p>
          </div>
        </div>

        <!-- Companies Table -->
        <div class="bg-white rounded-xl shadow-md overflow-hidden">
          <div class="px-6 py-4 border-b border-gray-200 bg-gray-50">
            <h3 class="text-lg font-semibold text-gray-800">Companies List</h3>
          </div>
          <div class="overflow-x-auto">
            <table class="min-w-full divide-y divide-gray-200">
              <thead class="bg-gray-50">
                <tr>
                  <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Company
                    Name</th>
                  <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Industry
                  </th>
                  <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Contact
                  </th>
                  <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Location
                  </th>
                  <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
                  <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Actions
                  </th>
                </tr>
              </thead>
              <tbody class="bg-white divide-y divide-gray-200">
                <tr *ngFor="let company of companies">
                  <td class="px-6 py-4 whitespace-nowrap">
                    <div class="flex items-center">
                      <div class="flex-shrink-0 h-10 w-10">
                        <div class="h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center">
                          <span class="text-blue-600 font-semibold text-lg">{{company.name[0]}}</span>
                        </div>
                      </div>
                      <div class="ml-4">
                        <div class="text-sm font-medium text-gray-900">{{company.name}}</div>
                        <div class="text-sm text-gray-500">{{company.website}}</div>
                      </div>
                    </div>
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap">
                    <div class="text-sm text-gray-900">{{company.industryType}}</div>
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap">
                    <div class="text-sm text-gray-900">{{company.email}}</div>
                    <div class="text-sm text-gray-500">{{company.contactNumber}}</div>
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                    {{company.location || 'Not specified'}}
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap">
                    <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full"
                      [ngClass]="company.active ? 'bg-green-100 text-green-800' : 'bg-gray-100 text-gray-800'">
                      {{company.active ? 'Active' : 'Inactive'}}
                    </span>
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                    <button class="text-blue-600 hover:text-blue-900 mr-3">Edit</button>
                    <button class="text-red-600 hover:text-red-900">Delete</button>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>

        <!-- Departments Card -->
        <div class="bg-white rounded-xl shadow-md p-5 transition-all hover:shadow-lg">
          <div class="flex justify-between items-center mb-4">
            <h2 class="text-lg font-semibold text-gray-800">Departments</h2>
            <div class="bg-blue-50 text-xs text-blue-600 font-medium px-2 py-1 rounded-full">
            {{  dashboardData?.departmentsData?.totalDepartments}} Total
            </div>
          </div>

          <div class="space-y-4 mt-4">
            <div *ngFor="let dept of dashboardData?.departmentStats; let i = index" class="flex items-center">
              <div class="department-indicator mr-3"
                   [ngClass]="getDepartmentColor(i)">
              </div>
              <span class="text-sm font-medium text-gray-800 mr-auto">{{dept.departmentName}}</span>
              <span class="text-sm font-bold" [ngClass]="getDepartmentTextColor(i)">
                {{dept.placementPercentage | number:'1.0-1'}}%
              </span>
            </div>
            
            <!-- Show loading state if no department data -->
            <div *ngIf="!dashboardData?.departmentStats?.length" 
                 class="space-y-3">
              <div class="flex items-center">
                <div class="w-2 h-2 rounded-full bg-gray-300 mr-3 loading-pulse"></div>
                <div class="flex-1 h-4 bg-gray-200 rounded loading-shimmer"></div>
              </div>
              <div class="flex items-center">
                <div class="w-2 h-2 rounded-full bg-gray-300 mr-3 loading-pulse"></div>
                <div class="flex-1 h-4 bg-gray-200 rounded loading-shimmer"></div>
              </div>
              <div class="flex items-center">
                <div class="w-2 h-2 rounded-full bg-gray-300 mr-3 loading-pulse"></div>
                <div class="flex-1 h-4 bg-gray-200 rounded loading-shimmer"></div>
              </div>
            </div>
          </div>

          <div class="mt-4 pt-4 border-t border-gray-200">
            <div class="flex justify-between mb-1">
              <span class="text-sm font-medium text-gray-500">Eligible Students</span>
              <span class="text-sm font-bold text-gray-800">{{dashboardData?.departmentsData?.eligibleStudents}}</span>
            </div>
            <div class="flex justify-between">
              <span class="text-sm font-medium text-gray-500">Remaining</span>
              <span class="text-sm font-bold text-gray-800">{{dashboardData?.departmentsData?.remaining}}</span>
            </div>
          </div>
        </div>

        <!-- Previous Year Card -->
        <div class="bg-white rounded-xl shadow-md p-5 transition-all hover:shadow-lg">
          <div class="flex justify-between items-center mb-4">
            <h2 class="text-lg font-semibold text-gray-800">Previous Year</h2>
            <select class="text-sm bg-gray-100 border-0 rounded-lg px-3 py-1 focus:ring-blue-500 focus:outline-none">
              <option>2023-24</option>
              <option>2022-23</option>
              <option>2021-22</option>
            </select>
          </div>

          
        </div>
      </div>    </main>
    
    <!-- Logs Content -->
    <main class="flex-1 p-6 overflow-auto" *ngIf="selectedTab=='Logs'">
      <div class="bg-gray-100 rounded-xl shadow-lg p-6 mb-4">
        <div class="flex items-center justify-between mb-6">
          <h1 class="text-3xl font-bold text-blue-800">Logs Management</h1>
          <div class="flex items-center space-x-4">
            <button (click)="refreshLogs()" class="bg-blue-600 text-white rounded-lg px-4 py-2 text-sm font-medium hover:bg-blue-700">
              <i class="fas fa-sync-alt mr-2"></i>
              Refresh
            </button>
            <button (click)="exportLogs()" class="bg-green-600 text-white rounded-lg px-4 py-2 text-sm font-medium hover:bg-green-700" [disabled]="isExporting">
              <i class="fas fa-download mr-2"></i>
              <span *ngIf="!isExporting">Export</span>
              <span *ngIf="isExporting">Exporting...</span>
            </button>
          </div>
        </div>

        <!-- Enhanced Search and Filter Section -->
        <div class="bg-white rounded-xl shadow-md p-6 mb-6">
          <h3 class="text-lg font-semibold text-gray-800 mb-4">Search & Filter Logs</h3>
          
          <!-- Search Input -->
          <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4">
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2">General Search</label>
              <div class="relative">
                <input 
                  type="text" 
                  [(ngModel)]="logSearchQuery" 
                  (ngModelChange)="onLogSearch()"
                  placeholder="Search logs..." 
                  class="w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500">
                <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                  <i class="fas fa-search text-gray-400"></i>
                </div>
              </div>
            </div>

            <!-- Action Filter -->
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2">Action</label>
              <select 
                [(ngModel)]="logFilters.action" 
                (ngModelChange)="applyLogFilters()"
                class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-blue-500 focus:border-blue-500">
                <option value="">All Actions</option>
                <option value="CREATE">Create</option>
                <option value="UPDATE">Update</option>
                <option value="DELETE">Delete</option>
                <option value="LOGIN">Login</option>
                <option value="LOGOUT">Logout</option>
                <option value="EXPORT">Export</option>
                <option value="IMPORT">Import</option>
              </select>
            </div>

            <!-- Entity Filter -->
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2">Entity Type</label>
              <select 
                [(ngModel)]="logFilters.entityName" 
                (ngModelChange)="applyLogFilters()"
                class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-blue-500 focus:border-blue-500">
                <option value="">All Entities</option>
                <option value="Student">Student</option>
                <option value="Company">Company</option>
                <option value="TPO_User">TPO User</option>
                <option value="Job">Job</option>
                <option value="Application">Application</option>
                <option value="Placement">Placement</option>
              </select>
            </div>

            <!-- Performed By Filter -->
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2">Performed By</label>
              <input 
                type="text" 
                [(ngModel)]="logFilters.performedBy" 
                (ngModelChange)="applyLogFilters()"
                placeholder="Username..." 
                class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-blue-500 focus:border-blue-500">
            </div>
          </div>

          <!-- Date Range Filter -->
          <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2">From Date</label>
              <input 
                type="datetime-local" 
                [(ngModel)]="logFilters.fromDate" 
                (ngModelChange)="applyLogFilters()"
                class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-blue-500 focus:border-blue-500">
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2">To Date</label>
              <input 
                type="datetime-local" 
                [(ngModel)]="logFilters.toDate" 
                (ngModelChange)="applyLogFilters()"
                class="w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-blue-500 focus:border-blue-500">
            </div>
            <div class="flex items-end">
              <button 
                (click)="clearLogFilters()" 
                class="w-full bg-gray-500 text-white rounded-lg px-4 py-2 text-sm font-medium hover:bg-gray-600">
                <i class="fas fa-times mr-2"></i>
                Clear Filters
              </button>
            </div>
          </div>

          <!-- Quick Filter Buttons -->
          <div class="flex flex-wrap gap-2">
            <button 
              (click)="setQuickFilter('today')" 
              class="bg-blue-100 text-blue-800 text-xs font-medium px-3 py-1 rounded-full hover:bg-blue-200">
              Today
            </button>
            <button 
              (click)="setQuickFilter('yesterday')" 
              class="bg-blue-100 text-blue-800 text-xs font-medium px-3 py-1 rounded-full hover:bg-blue-200">
              Yesterday
            </button>
            <button 
              (click)="setQuickFilter('last7days')" 
              class="bg-blue-100 text-blue-800 text-xs font-medium px-3 py-1 rounded-full hover:bg-blue-200">
              Last 7 Days
            </button>
            <button 
              (click)="setQuickFilter('last30days')" 
              class="bg-blue-100 text-blue-800 text-xs font-medium px-3 py-1 rounded-full hover:bg-blue-200">
              Last 30 Days
            </button>
          </div>
        </div>

        <!-- Results Summary -->
        <div class="bg-white rounded-lg p-4 mb-4 border border-gray-200">
          <div class="flex justify-between items-center">
            <span class="text-sm text-gray-600">
              Showing {{filteredLogs.length}} of {{logs.length}} log entries
            </span>
            <div class="flex items-center space-x-2">
              <span class="text-sm text-gray-600">Sort by:</span>
              <select 
                [(ngModel)]="logSortBy" 
                (ngModelChange)="sortLogs()"
                class="text-sm border border-gray-300 rounded px-2 py-1 focus:ring-blue-500 focus:border-blue-500">
                <option value="timestamp_desc">Latest First</option>
                <option value="timestamp_asc">Oldest First</option>
                <option value="action_asc">Action A-Z</option>
                <option value="performedBy_asc">User A-Z</option>
              </select>
            </div>
          </div>
        </div>
    
        <!-- Logs Table -->
        <div class="bg-white rounded-xl shadow-md overflow-hidden">
          <div class="px-6 py-4 border-b border-gray-200 bg-gray-50">
            <h3 class="text-lg font-semibold text-gray-800">Activity Logs</h3>
          </div>
          
          <!-- Loading State -->
          <div *ngIf="isLoadingLogs" class="px-6 py-8 text-center">
            <div class="inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"></div>
            <p class="mt-2 text-gray-600">Loading logs...</p>
          </div>

          <!-- No Results -->
          <div *ngIf="!isLoadingLogs && filteredLogs.length === 0" class="px-6 py-8 text-center">
            <div class="text-gray-400 mb-4">
              <i class="fas fa-search text-4xl"></i>
            </div>
            <h3 class="text-lg font-medium text-gray-900 mb-2">No logs found</h3>
            <p class="text-gray-500">Try adjusting your search criteria or filters.</p>
          </div>

          <!-- Table -->
          <div class="overflow-x-auto" *ngIf="!isLoadingLogs && filteredLogs.length > 0">
            <table class="min-w-full divide-y divide-gray-200">
              <thead class="bg-gray-50">
                <tr>
                  <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                    <button (click)="sortBy('timestamp')" class="flex items-center space-x-1 hover:text-gray-700">
                      <span>Timestamp</span>
                      <i class="fas fa-sort text-xs"></i>
                    </button>
                  </th>
                  <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                    <button (click)="sortBy('action')" class="flex items-center space-x-1 hover:text-gray-700">
                      <span>Action</span>
                      <i class="fas fa-sort text-xs"></i>
                    </button>
                  </th>
                  <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                    <button (click)="sortBy('performedBy')" class="flex items-center space-x-1 hover:text-gray-700">
                      <span>Performed By</span>
                      <i class="fas fa-sort text-xs"></i>
                    </button>
                  </th>
                  <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                    <button (click)="sortBy('entityName')" class="flex items-center space-x-1 hover:text-gray-700">
                      <span>Entity</span>
                      <i class="fas fa-sort text-xs"></i>
                    </button>
                  </th>
                  <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Entity ID</th>
                  <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Details</th>
                </tr>
              </thead>
              <tbody class="bg-white divide-y divide-gray-200">
                <tr *ngFor="let log of filteredLogs" class="hover:bg-gray-50 transition-colors">
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
                    <div class="flex flex-col">
                      <span class="font-medium">{{ log.timestamp | date:'short' }}</span>
                      <span class="text-gray-500 text-xs">{{ log.timestamp | date:'EEEE' }}</span>
                    </div>
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap">
                    <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium"
                          [ngClass]="{
                            'bg-green-100 text-green-800': log.action === 'CREATE',
                            'bg-blue-100 text-blue-800': log.action === 'UPDATE',
                            'bg-red-100 text-red-800': log.action === 'DELETE',
                            'bg-yellow-100 text-yellow-800': log.action === 'LOGIN',
                            'bg-gray-100 text-gray-800': log.action === 'LOGOUT',
                            'bg-purple-100 text-purple-800': log.action === 'EXPORT',
                            'bg-indigo-100 text-indigo-800': log.action === 'IMPORT'
                          }">
                      {{ log.action }}
                    </span>
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">
                    <div class="flex items-center">
                      <div class="h-8 w-8 rounded-full bg-gray-200 flex items-center justify-center mr-3">
                        <span class="text-xs font-medium text-gray-600">{{ log.performedBy.charAt(0).toUpperCase() }}</span>
                      </div>
                      <span class="font-medium">{{ log.performedBy }}</span>
                    </div>
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap text-sm">
                    <a *ngIf="log.entityName === 'Student'" 
                       [routerLink]="['/view_profile', log.entityId]" 
                       class="text-blue-600 hover:text-blue-800 hover:underline font-medium">
                      {{ log.entityName }}
                    </a>
                    <span *ngIf="log.entityName !== 'Student'" class="text-gray-900 font-medium">{{ log.entityName }}</span>
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                    <span class="font-mono bg-gray-100 px-2 py-1 rounded">{{ log.entityId }}</span>
                  </td>
                  <td class="px-6 py-4 text-sm text-gray-900">
                    <div class="max-w-xs truncate" [title]="log.details">
                      {{ log.details }}
                    </div>
                  </td>
                </tr>
              </tbody>
            </table>
            
            <!-- Pagination Controls -->
            <div class="bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6">
              <div class="flex-1 flex justify-between sm:hidden">
                <button 
                  (click)="previousLogPage()"
                  [disabled]="!hasPreviousLogPage"
                  class="relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed">
                  Previous
                </button>
                <button 
                  (click)="nextLogPage()"
                  [disabled]="!hasNextLogPage"
                  class="ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed">
                  Next
                </button>
              </div>
              <div class="hidden sm:flex-1 sm:flex sm:items-center sm:justify-between">
                <div>
                  <p class="text-sm text-gray-700">
                    Showing page 
                    <span class="font-medium">{{ currentLogPage + 1 }}</span>
                    of
                    <span class="font-medium">{{ totalLogPages }}</span>
                    ({{ totalLogElements }} total entries)
                  </p>
                </div>
                <div>
                  <nav class="relative z-0 inline-flex rounded-md shadow-sm -space-x-px" aria-label="Pagination">
                    <button 
                      (click)="previousLogPage()"
                      [disabled]="!hasPreviousLogPage"
                      class="relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed">
                      <span class="sr-only">Previous</span>
                      <i class="fas fa-chevron-left h-5 w-5"></i>
                    </button>
                    
                    <!-- Page numbers (limit to reasonable number) -->
                    <button 
                      *ngFor="let page of getDisplayPages(); let i = index"
                      (click)="goToLogPage(page)"
                      [ngClass]="{
                        'bg-blue-50 border-blue-500 text-blue-600': page === currentLogPage,
                        'bg-white border-gray-300 text-gray-500 hover:bg-gray-50': page !== currentLogPage
                      }"
                      class="relative inline-flex items-center px-4 py-2 border text-sm font-medium">
                      {{ page + 1 }}
                    </button>
                    
                    <button 
                      (click)="nextLogPage()"
                      [disabled]="!hasNextLogPage"
                      class="relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed">
                      <span class="sr-only">Next</span>
                      <i class="fas fa-chevron-right h-5 w-5"></i>
                    </button>
                  </nav>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>
    
    <main class="flex-1 p-6 overflow-auto" *ngIf="selectedTab=='Search'">
    
        
        <!-- Add your search component here -->
        <app-tpo-search></app-tpo-search>
  
    </main>
        
    <main class="flex-1 p-6 overflow-auto" *ngIf="selectedTab=='Post'">
    
        
      <!-- Add your search component here -->
      <app-post-job></app-post-job>

  </main>
    <main class="flex-1 p-6 overflow-auto" *ngIf="selectedTab == 'TPO'"> 
      
          
      <div class="bg-gray-100 rounded-xl shadow-lg p-6 mb-4">
        <div class="flex items-center justify-between mb-6">
          <h1 class="text-3xl font-bold text-blue-800">TPO User Management</h1>
          <div class="flex items-center space-x-4">
            <div class="relative">
              
            </div>
            <button (click)="showAddTpoUserModal=true"
              class="bg-blue-600 text-white rounded-lg px-4 py-2 text-sm font-medium hover:bg-blue-700">
              Add TPO User
            </button>
          </div>
        </div>

        <!-- TPO Users Table -->
        <div class="bg-white rounded-xl shadow-md overflow-hidden">
          <div class="px-6 py-4 border-b border-gray-200 bg-gray-50">
            <h3 class="text-lg font-semibold text-gray-800">TPO Users List</h3>
          </div>
          <div class="overflow-x-auto">
            <table class="min-w-full divide-y divide-gray-200">
              <thead class="bg-gray-50">
                <tr>  
                  <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                    Name</th>
                  <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                    Email</th>
              
                  <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                    Role</th>
                  <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                    Status</th>
                  <th class="px-6 py-3  text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                    Actions</th>
                </tr>
              </thead>
              <tbody class="bg-white divide-y divide-gray-200">
                <tr *ngFor="let user of tpoUsers">
                  <!-- Add this *ngIf condition to skip TPO_HEAD -->
                  <ng-container *ngIf="user.username !== 'TPO_HEAD'">
                    <td class="px-6 py-4 whitespace-nowrap" *ngIf="!isadmin">
                      <div class="flex items-center">
                        <div class="flex-shrink-0 h-10 w-10">
                          <div class="h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center">
                            <span class="text-blue-600 font-semibold text-lg">{{user.username[0]}}</span>
                          </div>
                        </div>
                        <div class="ml-4">
                          <div class="text-sm font-medium text-gray-900">{{user.username}}</div>
                          <div class="text-sm text-gray-500">{{user.contactNumber}}</div>
                        </div>
                      </div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">
                      <div class="text-sm text-gray-900">{{user.userEmail}}</div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">
                      <div class="text-sm text-gray-900">{{user.role}}</div>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap">
                      <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full"
                        [ngClass]="user.verified ? 'bg-green-100 text-green-800' : 'bg-gray-100 text-gray-800'">
                        {{user.verified ? 'Enabled' : 'Disabled'}}
                      </span>
                    </td>
                    <td class="px-6 py-4 whitespace-nowrap"></td>
                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                      <button (click)="onEditTpoUser(user,user.id)"
                        class="text-blue-600 hover:text-blue-900 mr-3">Edit</button>
                      <button (click)="onDeleteTpoUser(user.id)"
                        class="text-red-600 hover:text-red-900">Delete</button>
                    </td>
                  </ng-container>
                </tr>
              
              </tbody>
            </table>
          </div>
        </div>
      </div>
     
      <!-- Add TPO User Modal -->
      <div *ngIf="showAddTpoUserModal"
        class="fixed inset-0 backdrop-blur bg-opacity-50 overflow-y-auto h-full w-full z-50">
        <div class="relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white">
          <div class="flex justify-between items-center mb-4">
            <h3 class="text-lg font-semibold text-gray-800">Add New TPO User</h3>
            <button (click)="showAddTpoUserModal=false" class="text-gray-400 hover:text-gray-500">
              <svg class="h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                  d="M6 18L18 6M6 6l12 12" />
              </svg>
            </button>
          </div>

          <form #tpoUserForm="ngForm" (ngSubmit)="onSubmitTpoUser()" class="space-y-4">
            <!-- Name -->
            <div>
              <label class="block text-sm font-medium text-gray-700">Name</label>
              <input 
                type="text" 
                [(ngModel)]="newTpoUser.username" 
                name="username" 
                required 
                #username="ngModel"
                class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500">
              <p *ngIf="username.invalid && username.touched" class="text-red-500 text-sm">Name is required</p>
            </div>
          
            <!-- Email -->
            <div>
              <label class="block text-sm font-medium text-gray-700">Email</label>
              <input 
                type="email" 
                [(ngModel)]="newTpoUser.email" 
                name="email" 
                required 
                #email="ngModel"
                class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500">
              <p *ngIf="email.invalid && email.touched" class="text-red-500 text-sm">Valid email is required</p>
            </div>
          
            <!-- Password -->
            <div>
              <label class="block text-sm font-medium text-gray-700">Password</label>
              <input 
                type="password" 
                [(ngModel)]="newTpoUser.password" 
                name="password" 
                required 
                #password="ngModel"
                pattern="(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}" 
                class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500">
              <p *ngIf="password.invalid && password.touched" class="text-red-500 text-sm">
                Password must be at least 8 characters, include uppercase, lowercase, number & special character
              </p>
            </div>
          
            <!-- Role -->
            <div>
              <label class="block text-sm font-medium text-gray-700">Role</label>
              <select 
                [(ngModel)]="newTpoUser.role" 
                name="role" 
                required 
                #role="ngModel"
                class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500">
                <option value="" disabled selected>Select Role</option>
                <option value="TPO_USER">TPO_USER</option>
                <option value="ADMIN">ADMIN</option>
                <option value="TPO_ASSISTANT">TPO_ASSISTANT</option>
              </select>
              <p *ngIf="role.invalid && role.touched" class="text-red-500 text-sm">Role is required</p>
            </div>
          
            <!-- Buttons -->
            <div class="flex justify-end space-x-3 mt-5">
              <button 
                type="button" 
                (click)="showAddTpoUserModal=false"
                class="px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200">
                Cancel
              </button>
              <button 
                type="submit" 
                [disabled]="tpoUserForm.invalid"
                class="px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 disabled:bg-gray-400">
                Add TPO User
              </button>
            </div>
          </form>
          
        </div>
      </div>

      <!-- Edit TPO User Modal -->
      <div *ngIf="showEditTpoUserModal"
        class="fixed inset-0 backdrop-blur bg-opacity-50 overflow-y-auto h-full w-full z-50">
        <div class="relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white">
          <div class="flex justify-between items-center mb-4">
            <h3 class="text-lg font-semibold text-gray-800">Edit TPO User</h3>
            <button (click)="showEditTpoUserModal=false" class="text-gray-400 hover:text-gray-500">
              <svg class="h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
              </svg>
            </button>
          </div>
        
          <form #editTpoUserForm="ngForm" (ngSubmit)="onUpdateTpoUser()" class="space-y-4">
            <!-- Name -->
    
        
            <!-- Email -->
            <div>
              <label class="block text-sm font-medium text-gray-700">Email</label>
              <input type="email" [(ngModel)]="selectedTpoUser.email" name="email" required #email="ngModel" 
                class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500">
              <p *ngIf="email.invalid && email.touched" class="text-red-500 text-sm">Valid email is required</p>
            </div>
        
            <!-- Change Password -->
            <div>
              <label class="block text-sm font-medium text-gray-700">Change Password</label>
              <input type="password" [(ngModel)]="selectedTpoUser.password" name="password" #password="ngModel"
                pattern="(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}"
                class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500">
              <p *ngIf="password.invalid && password.touched" class="text-red-500 text-sm">
                Password must be at least 8 characters, include uppercase, lowercase, number & special character
              </p>
            </div>
        
            <!-- Role -->
            <div>
              <label class="block text-sm font-medium text-gray-700">Role</label>
              <select [(ngModel)]="selectedTpoUser.role" name="role" required #role="ngModel"
                class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500">
                <option value="TPO_USER">TPO_USER</option>
                <option value="ADMIN">ADMIN</option>
                <option value="TPO_ASSISTANT">TPO_ASSISTANT</option>
              </select>
              <p *ngIf="role.invalid && role.touched" class="text-red-500 text-sm">Role is required</p>
            </div>
        
            <!-- Enable/Disable Account -->
            <div class="flex items-center space-x-2">
              <div class="flex items-center space-x-2">
                <select 
                  [(ngModel)]="selectedTpoUser.status" 
                  name="accountStatus" 
                  class="block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm"
                >
                  <option [ngValue]="true">Enable Account</option>
                  <option [ngValue]="false">Disable Account</option>
                </select>
              </div>
            </div>
        
            <!-- Buttons -->
            <div class="flex justify-end space-x-3 mt-5">
              <button type="button" (click)="showEditTpoUserModal=false"
                class="px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200">
                Cancel
              </button>
              <button type="submit"
                class="px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 disabled:bg-gray-400">
                Update User
              </button>
            </div>
          </form>
        </div>
        
        <!-- Similar to Add Modal but with editingTpoUser instead of newTpoUser -->
      </div>
        
     </main>
    <main class="flex-1 p-6 overflow-auto" *ngIf="selectedTab=='Companies'">
      <div class="bg-gray-100 rounded-xl shadow-lg p-6 mb-4">
        <div class="flex items-center justify-between mb-6">
          <h1 class="text-3xl font-bold text-blue-800">Company Management</h1>
          <div class="flex items-center space-x-4">
            <div class="relative">
            
            </div>
            <button (click)="showAddCompanyModal=true"
              class="bg-blue-600 text-white rounded-lg px-4 py-2 text-sm font-medium hover:bg-blue-700">
              Add Company
            </button>

            <!-- Add Company Modal -->
            <div *ngIf="showAddCompanyModal"
              class="fixed inset-0 backdrop-blur justify-center bg- bg-opacity-50 overflow-y-auto h-full w-full z-50">
              <div class="relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white">
                <div class="flex justify-between items-center mb-4">
                  <h3 class="text-lg font-semibold text-gray-800">Add New Company</h3>
                  <button (click)="showAddCompanyModal=false" class="text-gray-400 hover:text-gray-500">
                    <svg class="h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                    </svg>
                  </button>
                </div>

                <form (ngSubmit)="onSubmitCompany()" class="space-y-4">
                  <div>
                    <label class="block text-sm font-medium text-gray-700">Company Name</label>
                    <input type="text" [(ngModel)]="newCompany.name" name="name" required
                      class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500">
                  </div>

                  <div>
                    <label class="block text-sm font-medium text-gray-700">Industry Type</label>
                    <input type="text" [(ngModel)]="newCompany.industryType" name="industryType" required
                      class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500">
                  </div>
                  <div>
                    <label class="block text-sm font-medium text-gray-700">Status</label>
                    <div class="mt-1 flex space-x-4">
                      <label class="inline-flex items-center">
                        <input type="radio" [(ngModel)]="newCompany.active" name="status" [value]="true" required
                          class="text-blue-600 focus:ring-blue-500">
                        <span class="ml-2 text-gray-700">Active</span>
                      </label>
                      <label class="inline-flex items-center">
                        <input type="radio" [(ngModel)]="newCompany.active" name="status" [value]="false" required
                          class="text-blue-600 focus:ring-blue-500">
                        <span class="ml-2 text-gray-700">Inactive</span>
                      </label>
                    </div>
                  </div>
                  <div>
                    <label class="block text-sm font-medium text-gray-700">MNC</label>
                    <div class="mt-1 flex space-x-4">
                      <label class="inline-flex items-center">
                        <input type="radio" [(ngModel)]="newCompany.mnc" name="MNC" [value]="true" required
                          class="text-blue-600 focus:ring-blue-500">
                        <span class="ml-2 text-gray-700">Yes</span>
                      </label>
                      <label class="inline-flex items-center">
                        <input type="radio" [(ngModel)]="newCompany.mnc" name="MNC" [value]="false" required
                          class="text-blue-600 focus:ring-blue-500">
                        <span class="ml-2 text-gray-700">No</span>
                      </label>
                    </div>
                  </div>
                  <div>
                    <label class="block text-sm font-medium text-gray-700">Hr Name</label>
                    <input type="name" [(ngModel)]="newCompany.hr_Name" name="name" required
                      class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500">
                  </div>
                  <div>
                    <label class="block text-sm font-medium text-gray-700">Email</label>
                    <input type="email" [(ngModel)]="newCompany.email" name="email" required
                      class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500">
                  </div>

                  <div>
                    <label class="block text-sm font-medium text-gray-700">Contact Number</label>
                    <input type="tel" [(ngModel)]="newCompany.contactNumber" name="contactNumber" required
                      class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500">
                  </div>

                  <div>
                    <label class="block text-sm font-medium text-gray-700">Location</label>
                    <input type="text" [(ngModel)]="newCompany.location" name="location"
                      class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500">
                  </div>

                  <div>
                    <label class="block text-sm font-medium text-gray-700">Website</label>
                    <input type="url" [(ngModel)]="newCompany.website" name="website"
                      class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500">
                  </div>

                  <div class="flex justify-end space-x-3 mt-5">
                    <button type="button" (click)="showAddCompanyModal=false"
                      class="px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200">
                      Cancel
                    </button>
                    <button type="submit"
                      class="px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700">
                      Add Company
                    </button>
                  </div>
                </form>
              </div>
            </div>
            <!-- ... rest of the existing code ... -->
          </div>
        </div>

        <!-- Company Statistics -->
        <!-- Company Statistics -->
        <div class="grid grid-cols-4 gap-4 mb-6">
          <!-- ... existing statistics cards ... -->
        </div>

        <!-- Companies Table -->
        <div class="bg-white rounded-xl shadow-md overflow-hidden">
          <div class="px-6 py-4 border-b border-gray-200 bg-gray-50">
            <h3 class="text-lg font-semibold text-gray-800">Companies List</h3>
          </div>
          <div class="overflow-x-auto">
            <table class="min-w-full divide-y divide-gray-200">
              <thead class="bg-gray-50">
                <tr>
                  <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Company
                    Name</th>
                  <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Industry
                  </th>
                  <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Hr Name
                  </th>
                  <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Contact
                  </th>
                  <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Location
                  </th>
                  <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
                  <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Actions
                  </th>
                </tr>
              </thead>
              <tbody class="bg-white divide-y divide-gray-200">
                <tr *ngFor="let company of companies">
                  <td class="px-6 py-4 whitespace-nowrap">
                    <div class="flex items-center">
                      <div class="flex-shrink-0 h-10 w-10">
                        <div class="h-10 w-10 rounded-full bg-blue-100 flex items-center justify-center">
                          <span class="text-blue-600 font-semibold text-lg">{{company.name[0]}}</span>
                        </div>
                      </div>
                      <div class="ml-4">
                        <div class="text-sm font-medium text-gray-900">{{company.name}} <span *ngIf="company.mnc" class="ml-2 bg-blue-100 text-blue-800 text-xs font-semibold px-2.5 py-0.5 rounded">MNC</span></div>
                        <div class="text-sm text-gray-500">{{company.website}}</div>
                      </div>
                    </div>
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap">
                    <div class="text-sm text-gray-900">{{company.industryType}}</div>
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap">
                    <div class="text-sm text-gray-900">{{company.hr_Name}}</div>
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap">
                 
                    <div class="text-sm text-gray-900">{{company.email}}</div>
                    <div class="text-sm text-gray-500">{{company.contactNumber}}</div>
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                    {{company.location || 'Not specified'}}
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap">
                    <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full"
                      [ngClass]="company.active ? 'bg-green-100 text-green-800' : 'bg-gray-100 text-gray-800'">
                      {{company.active ? 'Active' : 'Inactive'}}
                    </span>
                  </td>
                  <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                    <button (click)="onEditCompany(company.id)"
                      class="text-blue-600 hover:text-blue-900 mr-3">Edit</button>
                    <button (click)="onDeleteCompany(company.id)"
                      class="text-red-600 hover:text-red-900">Delete</button>
                  </td>
                </tr>
              </tbody>
            </table>
            <!-- Add Edit Modal -->
            <div *ngIf="showEditCompanyModal"
              class="fixed inset-0 backdrop-blur  bg-opacity-50 overflow-y-auto h-full w-full z-50">
              <div class="relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white">
                <div class="flex justify-between items-center mb-4">
                  <h3 class="text-lg font-semibold text-gray-800">Edit Company</h3>
                  <button (click)="showEditCompanyModal=false" class="text-gray-400 hover:text-gray-500">
                    <svg class="h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                    </svg>
                  </button>
                </div>

                <form (ngSubmit)="onUpdateCompany()" class="space-y-4" *ngIf="editingCompany">
                  <div>
                    <label class="block text-sm font-medium text-gray-700">Company Name</label>
                    <input type="text" [(ngModel)]="editingCompany.name" name="name" required
                      class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500">
                  </div>

                  <div>
                    <label class="block text-sm font-medium text-gray-700">Industry Type</label>
                    <input type="text" [(ngModel)]="editingCompany.industryType" name="industryType" required
                      class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500">
                  </div>
                  
                  <div>
                    <label class="block text-sm font-medium text-gray-700">Status</label>
                    <div class="mt-1 flex space-x-4">
                      <label class="inline-flex items-center">
                        <input type="radio" [(ngModel)]="editingCompany.active" name="editStatus" [value]="true" required
                          class="text-blue-600 focus:ring-blue-500">
                        <span class="ml-2 text-gray-700">Active</span>
                      </label>
                      <label class="inline-flex items-center">
                        <input type="radio" [(ngModel)]="editingCompany.active" name="editStatus" [value]="false" required
                          class="text-blue-600 focus:ring-blue-500">
                        <span class="ml-2 text-gray-700">Inactive</span>
                      </label>
                    </div>
                  </div>
                  
                  <div>
                    <label class="block text-sm font-medium text-gray-700">MNC</label>
                    <div class="mt-1 flex space-x-4">
                      <label class="inline-flex items-center">
                        <input type="radio" [(ngModel)]="editingCompany.mnc" name="editMNC" [value]="true" required
                          class="text-blue-600 focus:ring-blue-500">
                        <span class="ml-2 text-gray-700">Yes</span>
                      </label>
                      <label class="inline-flex items-center">
                        <input type="radio" [(ngModel)]="editingCompany.mnc" name="editMNC" [value]="false" required
                          class="text-blue-600 focus:ring-blue-500">
                        <span class="ml-2 text-gray-700">No</span>
                      </label>
                    </div>
                  </div>

                  <div>
                    <label class="block text-sm font-medium text-gray-700">Hr Name</label>
                    <input type="name" [(ngModel)]="editingCompany.hr_Name" name="name" required
                      class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500">
                  </div>
                  <div>
                    <label class="block text-sm font-medium text-gray-700">Email</label>
                    <input type="email" [(ngModel)]="editingCompany.email" name="email" required
                      class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500">
                  </div>

                  <div>
                    <label class="block text-sm font-medium text-gray-700">Contact Number</label>
                    <input type="tel" [(ngModel)]="editingCompany.contactNumber" name="contactNumber" required
                      class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500">
                  </div>

                  <div>
                    <label class="block text-sm font-medium text-gray-700">Location</label>
                    <input type="text" [(ngModel)]="editingCompany.location" name="location"
                      class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500">
                  </div>

                  <div>
                    <label class="block text-sm font-medium text-gray-700">Website</label>
                    <input type="url" [(ngModel)]="editingCompany.website" name="website"
                      class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500">
                  </div>

                  <div class="flex justify-end space-x-3 mt-5">
                    <button type="button" (click)="showEditCompanyModal=false"
                      class="px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200">
                      Cancel
                    </button>
                    <button type="submit"
                      class="px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700">
                      Update Company
                    </button>
                  </div>
                </form>

              </div>
              
            </div>
     
            <!-- Update the Actions buttons in the table -->
            <!-- TPO Users Content -->
          </div>
        </div>
      </div>
    </main>

    <!-- Reports Content -->
    <main class="flex-1 p-6 overflow-auto" *ngIf="selectedTab=='Reports'">
      <div class="main-content dashboard-header rounded-xl shadow-enhanced p-6 mb-6">
        <div class="flex items-center justify-between mb-6">
          <div>
            <h1 class="text-3xl font-bold gradient-text">Reports & Analytics</h1>
            <p class="text-gray-600 mt-1">Generate comprehensive reports and export data for analysis.</p>
          </div>
          <div class="flex items-center space-x-2">
            <div class="flex items-center space-x-2 bg-white/50 backdrop-blur-sm rounded-lg px-3 py-2">
              <div class="w-2 h-2 bg-blue-500 rounded-full animate-pulse"></div>
              <span class="text-sm font-medium text-gray-700">Data Ready</span>
            </div>
          </div>
        </div>

        <!-- Yearly Reports Section -->
        <div class="bg-gradient-to-r from-purple-50 to-pink-50 rounded-xl p-6 mb-8 border border-purple-200">
          <div class="flex items-center justify-between mb-6">
            <div>
              <h3 class="text-xl font-bold text-gray-800">Yearly Reports & Analytics</h3>
              <p class="text-sm text-gray-600 mt-1">Generate comprehensive yearly reports and compare performance across years</p>
            </div>
            <div class="flex items-center space-x-4">
              <!-- Year Selector -->
              <div class="flex items-center space-x-2">
                <label class="text-sm font-medium text-gray-700">Year:</label>
                <select [(ngModel)]="selectedYear" 
                        (ngModelChange)="onYearChange($event)"
                        class="bg-white border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-blue-500 focus:border-blue-500">
                  <option *ngFor="let year of getAvailableYears()" [value]="year">{{year}}</option>
                </select>
              </div>
              
              <!-- Export Buttons -->
              <div class="flex items-center space-x-2">
                <button (click)="exportYearlyBackup()" 
                        class="btn-primary" 
                        [disabled]="isExportingYearly">
                  <i class="fas fa-file-excel mr-2"></i>
                  <span *ngIf="!isExportingYearly">Export Excel</span>
                  <span *ngIf="isExportingYearly">Exporting...</span>
                </button>
                <button (click)="loadYearlyAnalytics()" class="btn-secondary">
                  <i class="fas fa-chart-line mr-2"></i>
                  Load Analytics
                </button>
                <button (click)="loadYearlyComparison()" class="btn-secondary">
                  <i class="fas fa-balance-scale mr-2"></i>
                  Compare Years
                </button>
              </div>
            </div>
          </div>

          <!-- Yearly Analytics Display -->
          <div *ngIf="yearlyAnalytics" class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
            <div class="bg-white rounded-lg p-4 shadow-sm border border-gray-200">
              <div class="flex items-center justify-between">
                <div>
                  <p class="text-sm text-gray-600">Total Students ({{selectedYear}})</p>
                  <p class="text-2xl font-bold text-blue-600">{{yearlyAnalytics?.totalStudents || 0}}</p>
                </div>
                <i class="fas fa-users text-blue-500 text-xl"></i>
              </div>
            </div>
            <div class="bg-white rounded-lg p-4 shadow-sm border border-gray-200">
              <div class="flex items-center justify-between">
                <div>
                  <p class="text-sm text-gray-600">Placed Students</p>
                  <p class="text-2xl font-bold text-green-600">{{yearlyAnalytics?.totalPlacements }}</p>
                </div>
                <i class="fas fa-check-circle text-green-500 text-xl"></i>
              </div>
            </div>
            <div class="bg-white rounded-lg p-4 shadow-sm border border-gray-200">
              <div class="flex items-center justify-between">
   <div>
  <p class="text-sm text-gray-600">Average Package</p>
  <p class="text-2xl font-bold text-purple-600">
    ₹{{ (yearlyAnalytics?.averagePackage / 100000) | number:'1.0-1' }}L
  </p>
</div>



                <i class="fas fa-money-bill-wave text-purple-500 text-xl"></i>
              </div>
            </div>
            <div class="bg-white rounded-lg p-4 shadow-sm border border-gray-200">
              <div class="flex items-center justify-between">
                <div>
                  <p class="text-sm text-gray-600">Placement Rate</p>
                  <p class="text-2xl font-bold text-teal-600">{{yearlyAnalytics.placementRate | number:'1.1-1'}}%</p>
                </div>
                <i class="fas fa-percentage text-teal-500 text-xl"></i>
              </div>
            </div>
          </div>

          <!-- Year Comparison Chart -->
          <div *ngIf="yearlyComparison" class="bg-white rounded-lg p-6 shadow-sm border border-gray-200">
            <h4 class="text-lg font-semibold text-gray-800 mb-4">Year-wise Comparison</h4>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
              <div *ngFor="let yearData of yearlyComparison?.yearlyData" 
                   class="bg-gray-50 rounded-lg p-4 border border-gray-200">
                <div class="text-center">
                  <p class="text-lg font-bold text-gray-800">{{yearData.year}}</p>
                  <p class="text-sm text-gray-600">Placed: {{yearData.placementRate| number:'1.1-1'}}%</p>
                  <p class="text-sm text-gray-600">Companies: {{yearData.totalCompanies || 'N/A'}}</p>
                  <p class="text-sm text-gray-600">Avg Package: ₹{{ (yearData.averagePackage / 100000) | number:'1.0-1' }}L</p>
                </div>
              </div>
            </div>
            <div class="mt-4 text-xs text-gray-500 text-center">
              <p>Generated on: {{yearlyComparison?.generatedAt | date:'medium'}}</p>
            </div>
          </div>
        </div>

        <!-- Quick Export Actions -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
          <div class="dashboard-card rounded-xl shadow-enhanced p-6">
            <div class="text-center">
              <div class="w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4">
                <i class="fas fa-users text-blue-600 text-2xl"></i>
              </div>
              <h3 class="text-lg font-bold text-gray-800 mb-2">Student Reports</h3>
              <p class="text-sm text-gray-600 mb-4">Export complete student database with placement details</p>
              <div class="space-y-2">
                <button (click)="exportStudentData('', '')" 
                        class="w-full btn-primary"
                        [disabled]="isExporting">
                  <i class="fas fa-file-excel mr-2"></i>
                  Export All Students (Excel)
                </button>
              </div>
            </div>
          </div>

          <div class="dashboard-card rounded-xl shadow-enhanced p-6">
            <div class="text-center">
              <div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
                <i class="fas fa-building text-green-600 text-2xl"></i>
              </div>
              <h3 class="text-lg font-bold text-gray-800 mb-2">Company Reports</h3>
              <p class="text-sm text-gray-600 mb-4">Export complete company database with hiring details</p>
              <div class="space-y-2">
                <button (click)="exportCompanyData()" 
                        class="w-full btn-primary"
                        [disabled]="isExporting">
                  <i class="fas fa-file-excel mr-2"></i>
                  Export All Companies (Excel)
                </button>
              </div>
            </div>
          </div>

          <div class="dashboard-card rounded-xl shadow-enhanced p-6">
            <div class="text-center">
              <div class="w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-4">
                <i class="fas fa-chart-bar text-purple-600 text-2xl"></i>
              </div>
              <h3 class="text-lg font-bold text-gray-800 mb-2">Dashboard Summary</h3>
              <p class="text-sm text-gray-600 mb-4">Export current dashboard data and analytics</p>
              <div class="space-y-2">
                <button (click)="exportDashboardData()" 
                        class="w-full btn-primary"
                        [disabled]="isExporting">
                  <i class="fas fa-file-excel mr-2"></i>
                  Export Dashboard (Excel)
                </button>
              </div>
            </div>
          </div>
        </div>

        <!-- Department-wise Reports -->
        <div class="dashboard-card rounded-xl shadow-enhanced p-6 mb-8">
          <div class="flex items-center justify-between mb-6">
            <h3 class="text-xl font-bold text-gray-800">Department-wise Reports</h3>
            <button (click)="loadDepartmentAnalytics()" class="btn-secondary">
              <i class="fas fa-sync-alt mr-2"></i>
              Refresh Data
            </button>
          </div>
          
          <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
            <div *ngFor="let dept of dashboardData?.departmentStats" 
                 class="bg-gray-50 rounded-lg p-4 border border-gray-200">
              <div class="flex items-center justify-between mb-3">
                <h4 class="font-semibold text-gray-800">{{dept.departmentName}}</h4>
                <div class="flex items-center space-x-1">
                  <button (click)="exportStudentData(dept.departmentName, '')" 
                          class="text-blue-600 hover:text-blue-800 text-sm">
                    <i class="fas fa-download"></i>
                  </button>
                </div>
              </div>
              <div class="space-y-2">
                <div class="flex justify-between text-sm">
                  <span class="text-gray-600">Total Students:</span>
                  <span class="font-medium">{{dept.totalStudents}}</span>
                </div>
                <div class="flex justify-between text-sm">
                  <span class="text-gray-600">Placed:</span>
                  <span class="font-medium text-green-600">{{dept.placedStudents}}</span>
                </div>
                <div class="flex justify-between text-sm">
                  <span class="text-gray-600">Placement Rate:</span>
                  <span class="font-medium">{{dept.placementPercentage | number:'1.1-1'}}%</span>
                </div>
                <div class="flex justify-between text-sm">
                  <span class="text-gray-600">Avg Package:</span>
                  <span class="font-medium">{{formatPackageAmount(dept.averagePackage)}}</span>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Custom Report Generator -->
        <div class="dashboard-card rounded-xl shadow-enhanced p-6">
          <div class="flex items-center justify-between mb-6">
            <div>
              <h3 class="text-xl font-bold text-gray-800">Custom Report Generator</h3>
              <p class="text-sm text-gray-600 mt-1">Create custom reports with specific filters and parameters</p>
            </div>
          </div>
          
          <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2">Report Type</label>
              <select class="w-full bg-white border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-blue-500 focus:border-blue-500">
                <option value="PLACEMENT">Placement Report</option>
                <option value="COMPANY">Company Report</option>
                <option value="DEPARTMENT">Department Report</option>
                <option value="STUDENT">Student Report</option>
              </select>
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2">From Date</label>
              <input type="date" class="w-full bg-white border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-blue-500 focus:border-blue-500">
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2">To Date</label>
              <input type="date" class="w-full bg-white border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-blue-500 focus:border-blue-500">
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2">Department</label>
              <select class="w-full bg-white border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-blue-500 focus:border-blue-500">
                <option value="">All Departments</option>
                <option *ngFor="let dept of dashboardData?.departmentStats" [value]="dept.departmentName">
                  {{dept.departmentName}}
                </option>
              </select>
            </div>
          </div>
          
          <div class="flex items-center space-x-4">
            <button class="btn-primary">
              <i class="fas fa-cog mr-2"></i>
              Generate Custom Report
            </button>
            <button class="btn-secondary">
              <i class="fas fa-save mr-2"></i>
              Save Template
            </button>
            <button class="btn-secondary">
              <i class="fas fa-clock mr-2"></i>
              Schedule Report
            </button>
          </div>
        </div>
      </div>
    </main>
  </div>
</div>
