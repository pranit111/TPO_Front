<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Registration</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.13/cropper.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.13/cropper.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Onest:wght@600&family=Roboto+Flex:wght@400&display=swap');

        .onest-font {
            font-family: 'Onest', sans-serif;
        }

        .roboto-flex {
            font-family: 'Roboto Flex', sans-serif;
        }

        .bg-custom {
            background-image: url('/Main_bg.png');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
        }

        .input-box::placeholder {
            color: #BFB4B4;
        }

        .form-container {
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }

        .progress-dot {
            transition: all 0.3s ease;
        }

        .input-field {
            transition: border-color 0.3s ease;
        }

        .input-field:focus {
            border-color: #062027;
            outline: none;
            box-shadow: 0 0 0 3px rgba(6, 32, 39, 0.1);
        }

        .btn-primary {
            background-color: #062027;
            transition: all 0.3s ease;
        }

        .btn-primary:hover {
            background-color: #0a2d38;
            transform: translateY(-1px);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .btn-secondary {
            background-color: #4a5568;
            transition: all 0.3s ease;
        }

        .btn-secondary:hover {
            background-color: #2d3748;
            transform: translateY(-1px);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .animate-fade-in {
            animation: fadeIn 0.3s ease-out forwards;
        }

        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb {
            background: #c1c1c1;
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #a8a8a8;
        }

        /* File upload styling */
        .file-upload {
            position: relative;
            overflow: hidden;
            display: inline-block;
            width: 100%;
        }

        .file-upload-input {
            position: absolute;
            left: 0;
            top: 0;
            opacity: 0;
            width: 100%;
            height: 100%;
            cursor: pointer;
        }

        .file-upload-label {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0.75rem;
            border: 1px solid #d1d5db;
            border-radius: 0.5rem;
            background-color: white;
            cursor: pointer;
            transition: all 0.2s;
        }

        .file-upload-label:hover {
            border-color: #9ca3af;
        }

        .file-upload-browse {
            background-color: #f3f4f6;
            color: #4b5563;
            padding: 0.25rem 0.75rem;
            border-radius: 0.375rem;
            font-size: 0.75rem;
            transition: all 0.2s;
        }

        .file-upload-label:hover .file-upload-browse {
            background-color: #e5e7eb;
        }

        /* Responsive adjustments */
        @media (max-width: 640px) {
            .form-container {
                padding: 1.5rem;
            }
            
            .grid-cols-1, .grid-cols-2, .grid-cols-3 {
                grid-template-columns: 1fr !important;
                gap: 1rem !important;
            }
            
            .flex-col-on-mobile {
                flex-direction: column;
            }
            
            .text-sm-on-mobile {
                font-size: 0.875rem;
            }
            
            .px-12-on-mobile {
                padding-left: 1.5rem;
                padding-right: 1.5rem;
            }
        }
    </style>
</head>

<body class="bg-custom flex flex-col items-center justify-center min-h-screen px-4 py-8 roboto-flex">
    <div class="flex flex-col items-center justify-center w-full max-w-6xl">
        <!-- College Logo -->
        <img src="/scoe_logo.png" alt="College Logo" class="w-auto h-auto max-h-28 md:max-h-32 mb-4 lg:mb-6 transition-all duration-300 rounded-full">

        <!-- Registration Box -->
        <div class="bg-white p-4 sm:p-6 md:p-8 w-full max-w-6xl rounded-xl form-container">
            <form class="w-full flex flex-col space-y-6">
                <!-- Step 1 -->
                <div *ngIf="step==1" class="w-full space-y-6 animate-fade-in">
                    <!-- Progress Indicator -->
                    <div class="flex items-center justify-center mx-auto mb-6 w-64">
                        <div class="w-4 h-4 bg-[#062027] rounded-full progress-dot mr-2"></div>
                        <div class="w-full h-[2px] bg-[#062027]"></div>
                        <div class="w-4 h-4 bg-gray-300 rounded-full progress-dot ml-2"></div>
                    </div>
                    
                    <!-- Personal Information Section -->
                    <div class="space-y-6">
                        <h3 class="text-lg font-semibold text-[#062027] border-b pb-2">Personal Information</h3>
                        
                        <!-- Name Fields -->
                        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-600 mb-1">First Name*</label>
                                <input type="text" [(ngModel)]="student.firstName" name="firstName" required 
                                    class="p-3 w-full rounded-lg border border-gray-300 text-sm input-field placeholder-gray-400">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-600 mb-1">Middle Name</label>
                                <input type="text" [(ngModel)]="student.middleName" name="middleName" 
                                    class="p-3 w-full rounded-lg border border-gray-300 text-sm input-field placeholder-gray-400">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-600 mb-1">Last Name*</label>
                                <input type="text" [(ngModel)]="student.lastName" required name="lastName" 
                                    class="p-3 w-full rounded-lg border border-gray-300 text-sm input-field placeholder-gray-400">
                            </div>
                        </div>

                        <!-- Date of Birth and Gender -->
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-600 mb-1">Date of Birth*</label>
                                <input type="date" [(ngModel)]="student.dateOfBirth" required name="dateOfBirth" 
                                    class="p-3 w-full rounded-lg border border-gray-300 text-sm input-field">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-600 mb-1">Gender*</label>
                                <div class="flex flex-wrap gap-4 mt-2">
                                    <label class="flex items-center space-x-2">
                                        <input type="radio" name="gender" [(ngModel)]="student.gender" value="Male" 
                                            class="accent-[#062027] h-4 w-4">
                                        <span class="text-sm">Male</span>
                                    </label>
                                    <label class="flex items-center space-x-2">
                                        <input type="radio" name="gender" value="Female" [(ngModel)]="student.gender" 
                                            class="accent-[#062027] h-4 w-4">
                                        <span class="text-sm">Female</span>
                                    </label>
                                    <label class="flex items-center space-x-2">
                                        <input type="radio" name="gender" value="Other" [(ngModel)]="student.gender" 
                                            class="accent-[#062027] h-4 w-4">
                                        <span class="text-sm">Other</span>
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Contact Information Section -->
                    <div class="space-y-6">
                        <h3 class="text-lg font-semibold text-[#062027] border-b pb-2">Contact Information</h3>
                        
                        <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 w-full">
                            <div>
                                <label class="block text-sm font-medium text-gray-600 mb-1">GR No*</label>
                                <input type="text" [(ngModel)]="student.grNo" required name="department" 
                                    class="p-3 w-full rounded-lg border border-gray-300 text-sm input-field placeholder-gray-400">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-600 mb-1">Phone Number*</label>
                                <input type="tel" 
                                    [(ngModel)]="student.phoneNumber" 
                                    name="phoneNumber" 
                                    required 
                                    pattern="[0-9]{10}"
                                    #phone="ngModel"
                                    class="p-3 w-full rounded-lg border border-gray-300 text-sm input-field placeholder-gray-400"
                                    [class.border-red-500]="phone.invalid && (phone.dirty || phone.touched)">
                                <span class="text-red-500 text-xs mt-1" *ngIf="phone.invalid && (phone.dirty || phone.touched)">
                                    Please enter a valid 10-digit phone number
                                </span>
                            </div>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-600 mb-1">Address*</label>
                            <input type="text" [(ngModel)]="student.address" required name="address" 
                                class="p-3 w-full rounded-lg border border-gray-300 text-sm input-field placeholder-gray-400">
                        </div>
                    </div>

                    <!-- Academic Information Section -->
                    <div class="space-y-6">
                        <h3 class="text-lg font-semibold text-[#062027] border-b pb-2">Academic Information</h3>
                        
                        <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 w-full">
                            <div>
                                <label class="block text-sm font-medium text-gray-600 mb-1">Department*</label>
                                <select [(ngModel)]="student.department" name="department" required
                                    class="p-3 w-full rounded-lg border border-gray-300 text-sm input-field">
                                    <option value="">Select Department</option>
                                    <option value="CSE">CSE</option>
                                    <option value="DS">DS</option>
                                    <option value="AIML">AIML</option>
                                    <option value="CIVIL">CIVIL</option>
                                    <option value="IT">IT</option>     
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-600 mb-1">Year*</label>
                                <select [(ngModel)]="student.academicYear" name="academicyear" required
                                    class="p-3 w-full rounded-lg border border-gray-300 text-sm input-field">
                                    <option value="">Select Year</option>
                                    <option value="FE">FE</option>
                                    <option value="SE">SE</option>
                                    <option value="TE">TE</option>
                                    <option value="BE">BE</option>
                                </select>
                            </div>
                        </div>

                        <!-- Student Type Checkboxes -->
                        <div class="flex flex-col sm:flex-row items-start sm:items-center gap-4 sm:gap-10">
                            <label class="flex items-center space-x-2 cursor-pointer">
                                <input type="checkbox" [(ngModel)]="isDiplomaStudent" name="isDiplomaStudent" 
                                    class="accent-[#062027] h-4 w-4">
                                <span class="text-sm font-medium text-gray-600">Diploma Student</span>
                            </label>
                            
                            <label class="flex items-center space-x-2 cursor-pointer">
                                <input type="checkbox" [(ngModel)]="isHscStudent" name="isHscStudent" 
                                    class="accent-[#062027] h-4 w-4">
                                <span class="text-sm font-medium text-gray-600">HSC</span>
                            </label>
                        </div>
                        
                        <!-- Conditional Marks Sections -->
                        <div *ngIf="isDiplomaStudent" class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-600 mb-1">Diploma Marks*</label>
                                <input type="number" 
                                    [(ngModel)]="student.diplomaMarks" 
                                    name="diplomaMarks" 
                                    required
                                    min="0" 
                                    max="100"
                                    #diploma="ngModel"
                                    class="p-3 w-full rounded-lg border border-gray-300 text-sm input-field placeholder-gray-400"
                                    [class.border-red-500]="diploma.invalid && (diploma.dirty || diploma.touched)">
                                <span class="text-red-500 text-xs mt-1" *ngIf="diploma.invalid && (diploma.dirty || diploma.touched)">
                                    Percentage must be between 35 and 100
                                </span>
                            </div>
                        </div>
                        
                        <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-600 mb-1">SSC Marks*</label>
                                <input type="number" 
                                    [(ngModel)]="student.sscMarks" 
                                    name="sscMarks" 
                                    required 
                                    min="0" 
                                    max="100"
                                    #ssc="ngModel"
                                    class="p-3 w-full rounded-lg border border-gray-300 text-sm input-field placeholder-gray-400"
                                    [class.border-red-500]="ssc.invalid && (ssc.dirty || ssc.touched)">
                                <span class="text-red-500 text-xs mt-1" *ngIf="ssc.invalid && (ssc.dirty || ssc.touched)">
                                    Percentage must be between 35 and 100
                                </span>
                            </div>
                            
                            <div *ngIf="isHscStudent">
                                <label class="block text-sm font-medium text-gray-600 mb-1">HSC Marks</label>
                                <input type="number" 
                                    [(ngModel)]="student.hscMarks" 
                                    name="hscMarks" 
                                    min="0" 
                                    max="100"
                                    #hsc="ngModel"
                                    class="p-3 w-full rounded-lg border border-gray-300 text-sm input-field placeholder-gray-400"
                                    [class.border-red-500]="hsc.invalid && (hsc.dirty || hsc.touched)">
                                <span class="text-red-500 text-xs mt-1" *ngIf="hsc.invalid && (hsc.dirty || hsc.touched)">
                                    Percentage must be between 35 and 100
                                </span>
                            </div>
                        </div>
                    </div>

                    <!-- Next Button -->
                    <div class="flex justify-center pt-4">
                        <button type="button" (click)="nextStep()"
                            class="px-12 py-3 bg-[#062027] text-white rounded-lg btn-primary text-sm font-medium hover:shadow-md transition-shadow">
                            Continue to Academic Details →
                        </button>
                    </div>
                </div>

                <!-- Step 2 -->
                <div *ngIf="step==2" class="w-full space-y-6 animate-fade-in">
                    <!-- Progress Indicator -->
                    <div class="flex items-center justify-center mx-auto mb-6 w-64">
                        <div class="w-4 h-4 bg-[#062027] rounded-full progress-dot mr-2"></div>
                        <div class="w-full h-[2px] bg-[#062027]"></div>
                        <div class="w-4 h-4 bg-[#062027] rounded-full progress-dot ml-2"></div>
                    </div>
                
                    <!-- Semester Marks Section -->
                    <div class="space-y-6">
                        <h3 class="text-lg font-semibold text-[#062027] border-b pb-2">Semester Details</h3>
                        
                        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 w-full">
                            <!-- Sem 1-6 CGPA Inputs with KT Checkboxes -->
                            <!-- Sem 1 -->
                            <div>
                                <label class="text-sm font-medium text-gray-600 mb-1">Sem-1 CGPA</label>
                                <div class="flex items-center gap-2">
                                    <input type="number" 
                                        [(ngModel)]="student.sem1Marks" 
                                        name="sem1Marks" 
                                        min="0" 
                                        max="10" 
                                        step="0.01"
                                        [disabled]="isDiplomaStudent"
                                        #sem1="ngModel"
                                        class="p-3 border border-gray-300 rounded-lg flex-grow text-sm input-field placeholder-gray-400"
                                        [class.border-red-500]="sem1.invalid && (sem1.dirty || sem1.touched)"
                                        [class.bg-gray-100]="isDiplomaStudent">
                                    <label class="flex items-center gap-1 cursor-pointer">
                                        <input type="checkbox" [(ngModel)]="student.sem1KT" name="sem1KT" [disabled]="isDiplomaStudent" 
                                            class="accent-[#062027] h-4 w-4">
                                        <span class="text-xs text-gray-600">KT</span>
                                    </label>
                                </div>
                                <span class="text-red-500 text-xs mt-1" *ngIf="sem1.invalid && (sem1.dirty || sem1.touched)">
                                    CGPA must be between 5 and 10
                                </span>
                            </div>

                            <!-- Sem 2 -->
                            <div>
                                <label class="text-sm font-medium text-gray-600 mb-1">Sem-2 CGPA</label>
                                <div class="flex items-center gap-2">
                                    <input type="number" 
                                        [(ngModel)]="student.sem2Marks" 
                                        name="sem2Marks" 
                                        min="0" 
                                        max="10" 
                                        step="0.01"
                                        [disabled]="isDiplomaStudent"
                                        #sem2="ngModel"
                                        class="p-3 border border-gray-300 rounded-lg flex-grow text-sm input-field placeholder-gray-400"
                                        [class.border-red-500]="sem2.invalid && (sem2.dirty || sem2.touched)"
                                        [class.bg-gray-100]="isDiplomaStudent">
                                    <label class="flex items-center gap-1 cursor-pointer">
                                        <input type="checkbox" [(ngModel)]="student.sem2KT" name="sem2KT" [disabled]="isDiplomaStudent" 
                                            class="accent-[#062027] h-4 w-4">
                                        <span class="text-xs text-gray-600">KT</span>
                                    </label>
                                </div>
                                <span class="text-red-500 text-xs mt-1" *ngIf="sem2.invalid && (sem2.dirty || sem2.touched)">
                                    CGPA must be between 5 and 10
                                </span>
                            </div>

                            <!-- Sem 3 -->
                            <div>
                                <label class="text-sm font-medium text-gray-600 mb-1">Sem-3 CGPA</label>
                                <div class="flex items-center gap-2">
                                    <input type="number" 
                                        [(ngModel)]="student.sem3Marks" 
                                        name="sem3Marks" 
                                        min="0" 
                                        max="10" 
                                        step="0.01"
                                        #sem3="ngModel"
                                        class="p-3 border border-gray-300 rounded-lg flex-grow text-sm input-field placeholder-gray-400"
                                        [class.border-red-500]="sem3.invalid && (sem3.dirty || sem3.touched)">
                                    <label class="flex items-center gap-1 cursor-pointer">
                                        <input type="checkbox" [(ngModel)]="student.sem3KT" name="sem3KT" 
                                            class="accent-[#062027] h-4 w-4">
                                        <span class="text-xs text-gray-600">KT</span>
                                    </label>
                                </div>
                                <span class="text-red-500 text-xs mt-1" *ngIf="sem3.invalid && (sem3.dirty || sem3.touched)">
                                    CGPA must be between 5 and 10
                                </span>
                            </div>

                            <!-- Sem 4 -->
                            <div>
                                <label class="text-sm font-medium text-gray-600 mb-1">Sem-4 CGPA</label>
                                <div class="flex items-center gap-2">
                                    <input type="number" 
                                        [(ngModel)]="student.sem4Marks" 
                                        name="sem4Marks" 
                                        min="0" 
                                        max="10" 
                                        step="0.01"
                                        #sem4="ngModel"
                                        class="p-3 border border-gray-300 rounded-lg flex-grow text-sm input-field placeholder-gray-400"
                                        [class.border-red-500]="sem4.invalid && (sem4.dirty || sem4.touched)">
                                    <label class="flex items-center gap-1 cursor-pointer">
                                        <input type="checkbox" [(ngModel)]="student.sem4KT" name="sem4KT" 
                                            class="accent-[#062027] h-4 w-4">
                                        <span class="text-xs text-gray-600">KT</span>
                                    </label>
                                </div>
                                <span class="text-red-500 text-xs mt-1" *ngIf="sem4.invalid && (sem4.dirty || sem4.touched)">
                                    CGPA must be between 5 and 10
                                </span>
                            </div>

                            <!-- Sem 5 -->
                            <div>
                                <label class="text-sm font-medium text-gray-600 mb-1">Sem-5 CGPA</label>
                                <div class="flex items-center gap-2">
                                    <input type="number" 
                                        [(ngModel)]="student.sem5Marks" 
                                        name="sem5Marks" 
                                        min="0" 
                                        max="10" 
                                        step="0.01"
                                        #sem5="ngModel"
                                        class="p-3 border border-gray-300 rounded-lg flex-grow text-sm input-field placeholder-gray-400"
                                        [class.border-red-500]="sem5.invalid && (sem5.dirty || sem5.touched)">
                                    <label class="flex items-center gap-1 cursor-pointer">
                                        <input type="checkbox" [(ngModel)]="student.sem5KT" name="sem5KT" 
                                            class="accent-[#062027] h-4 w-4">
                                        <span class="text-xs text-gray-600">KT</span>
                                    </label>
                                </div>
                                <span class="text-red-500 text-xs mt-1" *ngIf="sem5.invalid && (sem5.dirty || sem5.touched)">
                                    CGPA must be between 5 and 10
                                </span>
                            </div>

                            <!-- Sem 6 -->
                            <div>
                                <label class="text-sm font-medium text-gray-600 mb-1">Sem-6 CGPA</label>
                                <div class="flex items-center gap-2">
                                    <input type="number" 
                                        [(ngModel)]="student.sem6Marks" 
                                        name="sem6Marks" 
                                        min="0" 
                                        max="10" 
                                        step="0.01"
                                        #sem6="ngModel"
                                        class="p-3 border border-gray-300 rounded-lg flex-grow text-sm input-field placeholder-gray-400"
                                        [class.border-red-500]="sem6.invalid && (sem6.dirty || sem6.touched)">
                                    <label class="flex items-center gap-1 cursor-pointer">
                                        <input type="checkbox" [(ngModel)]="student.sem6KT" name="sem6KT" 
                                            class="accent-[#062027] h-4 w-4">
                                        <span class="text-xs text-gray-600">KT</span>
                                    </label>
                                </div>
                                <span class="text-red-500 text-xs mt-1" *ngIf="sem6.invalid && (sem6.dirty || sem6.touched)">
                                    CGPA must be between 5 and 10
                                </span>
                            </div>
                        </div>
                        
                        <!-- Total KT Count -->
                        <div class="mt-4">
                            <label class="text-sm font-medium text-gray-600 mb-1">Total KT Count</label>
                            <input type="number" 
                                [placeholder]="calculateTotalKT()" 
                                [(ngModel)]="student.noOfBacklogs" 
                                name="noOfBacklogs"
                                class="p-3 border border-gray-300 rounded-lg w-full text-sm input-field placeholder-gray-400">
                            <span class="text-xs text-gray-500 italic mt-1">
                                Auto-calculated KT count: <span class="font-medium">{{calculateTotalKT()}}</span>. You can modify if needed.
                            </span>
                        </div>
                    </div>

                    <!-- Documents Upload Section -->
                    <div class="space-y-6">
                        <h3 class="text-lg font-semibold text-[#062027] border-b pb-2">Documents Upload</h3>
                        
                        <!-- Resume Upload -->
                        <div>
                            <label class="block text-sm font-medium text-gray-600 mb-1">Upload Resume*</label>
                            <div class="file-upload">
                                <input type="file" 
                                    class="file-upload-input"
                                    (change)="onFileSelectedresume($event)">
                                <label class="file-upload-label">
                                    <span class="text-gray-500 truncate">
                                        {{ resume ? resume.name : 'Choose file...' }}
                                    </span>
                                    <span class="file-upload-browse">Browse</span>
                                </label>
                            </div>
                            <span class="text-xs text-gray-500 mt-1">PDF format preferred (max 1MB)</span>
                            <div *ngIf="resume" class="flex items-center mt-2 text-xs text-green-600">
                                <svg class="w-4 h-4 mr-1" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                                </svg>
                                Resume uploaded successfully
                            </div>
                        </div>
                        
                        <!-- Profile Picture Upload -->
                        <div>
                            <label class="block text-sm font-medium text-gray-600 mb-1">Upload Profile Picture*</label>
                            <div class="file-upload">
                                <input type="file" 
                                    class="file-upload-input"
                                    accept="image/*"
                                    (change)="onFileSelectedprof($event)">
                                <label class="file-upload-label">
                                    <span class="text-gray-500 truncate">
                                        {{ profile_pic ? 'Profile picture selected' : 'Choose file...' }}
                                    </span>
                                    <span class="file-upload-browse">Browse</span>
                                </label>
                            </div>
                            <span class="text-xs text-gray-500 mt-1">JPG/PNG format (max 1MB)</span>
                            <div *ngIf="profile_pic" class="flex items-center mt-2 text-xs text-green-600">
                                <svg class="w-4 h-4 mr-1" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                                </svg>
                                Profile picture uploaded successfully
                            </div>
                            
                            <!-- Image Preview -->
                            <div *ngIf="imageUrl" class="mt-4 flex flex-col items-center">
                                <div class="w-24 h-24 rounded-full border-2 border-gray-200 overflow-hidden shadow-sm">
                                    <img [src]="imageUrl" class="w-full h-full object-cover">
                                </div>
                                <span class="text-xs text-gray-500 mt-2">Preview</span>
                            </div>
                        </div>
                        
                        <!-- Result Documents Section -->
                        <div class="space-y-4">
                            <h4 class="text-sm font-medium text-gray-600">Academic Documents*</h4>
                            
                            <!-- SSC Result -->
                            <div>
                                <label class="block text-sm font-medium text-gray-600 mb-1">SSC Result</label>
                                <div class="file-upload">
                                    <input type="file" 
                                        class="file-upload-input"
                                        (change)="onFileSelectedSSCResult($event)" 
                                        accept=".pdf,.jpg,.jpeg,.png">
                                    <label class="file-upload-label">
                                        <span class="text-gray-500 truncate">
                                            {{ sscResult ? sscResult.name : 'Choose file...' }}
                                        </span>
                                        <span class="file-upload-browse">Browse</span>
                                    </label>
                                </div>
                                <span class="text-xs text-gray-500 mt-1">Upload SSC marksheet (PDF max 1MB)</span>
                                <div *ngIf="sscResult" class="flex items-center mt-2 text-xs text-green-600">
                                    <svg class="w-4 h-4 mr-1" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                                    </svg>
                                    SSC result uploaded successfully
                                </div>
                            </div>
                            
                            <!-- HSC Result -->
                            <div *ngIf="isHscStudent">
                                <label class="block text-sm font-medium text-gray-600 mb-1">HSC Result</label>
                                <div class="file-upload">
                                    <input type="file" 
                                        class="file-upload-input"
                                        (change)="onFileSelectedHSCResult($event)" 
                                        accept=".pdf,.jpg,.jpeg,.png">
                                    <label class="file-upload-label">
                                        <span class="text-gray-500 truncate">
                                            {{ hscResult ? hscResult.name : 'Choose file...' }}
                                        </span>
                                        <span class="file-upload-browse">Browse</span>
                                    </label>
                                </div>
                                <span class="text-xs text-gray-500 mt-1">Upload HSC marksheet (PDF max 1MB)</span>
                                <div *ngIf="hscResult" class="flex items-center mt-2 text-xs text-green-600">
                                    <svg class="w-4 h-4 mr-1" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                                    </svg>
                                    HSC result uploaded successfully
                                </div>
                            </div>
                            
                            <!-- Diploma Result -->
                            <div *ngIf="isDiplomaStudent">
                                <label class="block text-sm font-medium text-gray-600 mb-1">Diploma Result</label>
                                <div class="file-upload">
                                    <input type="file" 
                                        class="file-upload-input"
                                        (change)="onFileSelectedDiplomaResult($event)" 
                                        accept=".pdf,.jpg,.jpeg,.png">
                                    <label class="file-upload-label">
                                        <span class="text-gray-500 truncate">
                                            {{ diplomaResult ? diplomaResult.name : 'Choose file...' }}
                                        </span>
                                        <span class="file-upload-browse">Browse</span>
                                    </label>
                                </div>
                                <span class="text-xs text-gray-500 mt-1">Upload Diploma marksheet (PDF max 1MB)</span>
                                <div *ngIf="diplomaResult" class="flex items-center mt-2 text-xs text-green-600">
                                    <svg class="w-4 h-4 mr-1" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path>
                                    </svg>
                                    Diploma result uploaded successfully
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Navigation Buttons -->
                    <div class="flex flex-col sm:flex-row justify-between gap-4 pt-6">
                        <button type="button" (click)="prevStep()"
                            class="px-6 py-3 bg-gray-600 text-white rounded-lg btn-secondary font-medium hover:shadow-md transition-shadow flex-1">
                            ← Back to Personal Details
                        </button>
                        <button type="button" (click)="submitStudent()"
                            class="px-6 py-3 bg-[#062027] text-white rounded-lg btn-primary font-medium hover:shadow-md transition-shadow flex-1">
                            Complete Registration
                        </button>
                    </div>
                </div>
            </form>
        </div>
    </div>

    <!-- Crop Modal -->
    <div *ngIf="showCropModal" class="fixed inset-0 flex items-center justify-center bg-black bg-opacity-60 p-4 z-50">
        <div class="bg-white p-6 rounded-xl shadow-xl w-full max-w-md animate-fade-in">
            <h2 class="text-xl font-semibold text-gray-800 mb-4">Crop Your Profile Picture</h2>
            
            <!-- Cropper Container -->
            <div class="relative w-full h-64 bg-gray-100 rounded-lg overflow-hidden mb-4">
                <img #imageCropper [src]="imageUrl" class="max-w-full max-h-full block">
            </div>

            <!-- Action Buttons -->
            <div class="flex flex-col sm:flex-row gap-3">
                <button (click)="cropImage()" 
                    class="flex-1 bg-green-600 hover:bg-green-700 text-white px-4 py-2.5 rounded-lg font-medium transition-colors flex items-center justify-center gap-2">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                    </svg>
                    Apply Crop
                </button>
                <button (click)="cancelCrop()" 
                    class="flex-1 bg-red-600 hover:bg-red-700 text-white px-4 py-2.5 rounded-lg font-medium transition-colors flex items-center justify-center gap-2">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd" />
                    </svg>
                    Cancel
                </button>
            </div>
        </div>
    </div>
</body>
</html>